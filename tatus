[33mcommit 32511636e242e7f3f08a9ae57bb06eaac4f6f9cf[m[33m ([m[1;36mHEAD -> [m[1;32ma2[m[33m, [m[1;31morigin/a2[m[33m)[m
Author: Joshua O'Hagan <ohagajosh@myvuw.ac.nz>
Date:   Fri Apr 23 17:05:00 2021 +1200

    Started working on the ice. I haven't found much information online, so I think I will wing it with the bubble and bump mapping.

[33mcommit c329ee354d64973ba5d916b3a1a87684005c9ccb[m
Author: Joshua O'Hagan <ohagajosh@myvuw.ac.nz>
Date:   Fri Apr 23 16:19:38 2021 +1200

    The partial sphere code gives the same output as the original code, and I have finished my profiling.

[33mcommit d31aa593b1bfce676955cb72478f0599602209f4[m
Author: Joshua O'Hagan <ohagajosh@myvuw.ac.nz>
Date:   Fri Apr 23 16:12:53 2021 +1200

    I think that I have fixed my partial spheres code. I am profiling it now.

[33mcommit 9e4208bcc7fe79d114fbb34013336ea1d780bc51[m
Author: Joshua O'Hagan <ohagajosh@myvuw.ac.nz>
Date:   Fri Apr 23 13:47:19 2021 +1200

    There's something wrong with my partial spheres code. I am going to debug it.

[33mcommit 568292839ac9580e2fb89b2313e044de47176cf4[m
Author: Joshua O'Hagan <ohagajosh@myvuw.ac.nz>
Date:   Fri Apr 23 12:04:06 2021 +1200

    Tested the partial sphere bounding box, and it does indeed speed things up (from about 8.7s to 10.4s).

[33mcommit 42930f7975d1b438355c62cafa2ed58cb30f93a2[m
Author: Joshua O'Hagan <ohagajosh@myvuw.ac.nz>
Date:   Fri Apr 23 11:49:22 2021 +1200

    Wrote the code for the partial sphere bounding box.

[33mcommit e083dbeb75216846a378a487bf3d9a2ea466c664[m
Author: Joshua O'Hagan <ohagajosh@myvuw.ac.nz>
Date:   Sat Apr 10 20:03:20 2021 +1200

    Create cornell box scene files which have only 1 pixel, so are instantaneous to render to an image. This is good for testing.
    
    Also created an output directory in the code for storing the final rendered images.

[33mcommit 9e3f7c35987ee0e46137be85cd7cadbea2637da7[m[33m ([m[1;31morigin/josh[m[33m, [m[1;32mjosh[m[33m)[m
Author: Joshua O'Hagan <ohagajosh@myvuw.ac.nz>
Date:   Sat Apr 10 14:58:46 2021 +1200

    Fixed the problems I was having by switching to master branch. Also added cornell box files to scenes folder.

[33mcommit f7230a89fa151ed87057913d23b5ab3001f931b6[m
Author: Joshua O'Hagan <ohagajosh@myvuw.ac.nz>
Date:   Fri Apr 9 15:29:28 2021 +1200

    Commiting changes before moving onto CGRA408 a2.

[33mcommit 6691c1a6e3c062138123bb3b0603910a8c7437fc[m
Author: Joshua O'Hagan <ohagajosh@myvuw.ac.nz>
Date:   Mon Mar 22 17:31:55 2021 +1300

    Did a lot of profiling in pbrt.

[33mcommit 634c56a616d9b2ffbf7c0099c83f85bd121f5b37[m
Author: Joshua O'Hagan <ohagajosh@myvuw.ac.nz>
Date:   Mon Mar 22 15:07:49 2021 +1300

    Got the pbrt renderer working on the command line.

[33mcommit aaa552a4b9cbf9dccb71450f47b268e0ed6370e2[m
Author: Artem Kharytoniuk <artemalive@gmail.com>
Date:   Sat Apr 11 20:46:33 2020 +0200

    Fix trilinear filtering
    
    A texture footprint with 'width' characteristic size corresponds to texture
    sampling rate with 1 sample per screen pixel. In order to satisfy the Nyquist
    limit we need a filter of size '2*width' - and that's what we have in the original
    code. This computation does not take into account though, that after computing
    lod and selecting mip levels, we apply bilinear filtering to sample each mip.
    This effectively increases filter size to '4*width' which results in too blurry images.
    
    There could be at least two solutions here: the first one is to use '2*width' filter size
    and then use point sampling when working with separate mip levels. Another solution
    proposed here is to select the mip levels based on the 'width' filter size and then rely
    on bilinear filtering to get correct result.
    
    I didn't check this but the second method could provide better results because the last step
    when we apply bilinear filtering takes into account specific use case and in the case of
    point sampling the final result is baked into the mip level, so we don't have an opportunity
    to select proper position between texels as we do with bilinear filtering.
    
    The proposed solution also matched HW filtering results, for example, in this
    project https://github.com/kennyalive/vulkan-raytracing, the RTX raytracing code
    computes texture lod using just 'width' and then applies bilinear filter. The result
    closely matches rasterization version. Color encoding of lod levels used in that demo
    allows to visualize differences in lod selection. By modifying the code to use '2*width' it
    can be shown that is produces wrong result.

[33mcommit 9629f11dc9d357d5930de6fc4eae904cacbe2eea[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jun 26 14:43:41 2020 -0700

    Fix bug in MicrofacetTransmission
    
    Return 0 for f() and pdf if both directions are on the same side of the microsurface.
    
    Issue #228, via Mandy Xia.

[33mcommit 3123d856067aebe201840dde3dd80c26535534d9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jun 26 13:36:10 2020 -0700

    Fix Henyey Greenstein importance sampling sign conventions (via Jiayin Cao)

[33mcommit d3d6cc54291f1467ad4ad3c70b89afb1a87379f6[m
Author: Jakub Hendrich <jakub.hendrich@fel.cvut.cz>
Date:   Wed Nov 13 20:10:51 2019 +0100

    Fix memory leak in FourierBSDFTable

[33mcommit bcac2854019683b06ca1a5b30e983816a831e481[m
Author: jim price <shadeops@gmail.com>
Date:   Sat Mar 14 18:20:00 2020 -0700

    Initialize alpha with lower bound to avoid NaN
    
    Alpha is as a denominator in the TrowbridgeReitzDistribution and
    BeckmannDistribution so we initialize to a lower bound of 0.001.
    
    This value was choosen as its less than the RoughnessToAlpha()'s lower
    bound and matches the bound in the Disney material.

[33mcommit 5469c93c1f188ffe17f9f4622a0f893c03b061a6[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jun 26 10:06:19 2020 -0700

    Fix rare NaN case in CosDPhi().
    
    Issue #272, via Pascal Grittmann.

[33mcommit c65c588eff6a285f5df4553faf2e95e43aa3ac1c[m
Author: Girish Ramesh <rgirish28@gmail.com>
Date:   Sat Oct 26 00:09:57 2019 +0100

    Correct importance sampling as per d'Eon paper

[33mcommit 416a080082a27e1f204e31ffe58e5e5cab2d179c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Dec 4 10:07:10 2019 -0800

    Fix memory leak introduced in 8445c002c.
    
    Issue #264.

[33mcommit 8445c002c26e76d8924436a609b0c519095c5c15[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Nov 22 17:30:32 2019 -0800

    SPPM: move MemoryArena vector out of "nIterations" loop
    
    This saves a bunch of unnecessary MemoryArena creation and deletion, which in turn was hurting parallel scalability.

[33mcommit 3f94503ae1777cd6d67a7788e06d67224a525ff4[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 26 17:07:44 2019 -0700

    Fix build for recent versions of xcode

[33mcommit 20a1cb561ae340e4fae846625395c18f411ddc46[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Oct 20 15:09:51 2019 -0700

    Fix pbrtObjectEnd to not mess up attribute/object end nesting when --cat/--toply is used

[33mcommit 478b2e6b922dd45d24c1a2ca8368aef83390d5e4[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 15 14:03:26 2019 -0700

    Fix orientation of wh in MicrofacetReflection::f
    
    Always orient wh to be on the same side of the surface as the normal; in turn, this means that the cos theta value passed to Fresnel::Evaluate() has the right sign.
    
    This in particular fixes the handling of total internal reflection with this BxDF, both accounting for it when it should be and not incorrectly including it when there is none. (Rendered images may change due to this, especially noticeable in cases where TIR was incorrectly happening with non-transmissive surfaces, giving bright highlights.)
    
    Fixes issues #214 and #254.

[33mcommit 4a77ece9ffdc8b6824552e3afdb5970716d086b8[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 15 11:33:30 2019 -0700

    Apply ReverseOrientation to per-vertex normals
    
    Issue #229 detritus.

[33mcommit 85af7603a2ba329d437cfd397c8e2b33cc4eb7e9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 14 13:23:15 2019 -0700

    Fix handling of per-vertex normals with transforms that swap handedness
    
    With triangle meshes, even when the shading normal's direction was authoratative (coming via per-vertex normal vectors), we'd still flip the shading normal if the transform swapped the coordinate system handedness. This in turn led to bugs where the wrong side of the light would be emissive when a ray intersected it.
    
    Issue #229

[33mcommit 34ec1db79b3713219ce855da46e00f1346bfe7a4[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 14 08:12:33 2019 -0700

    Fix DisneyMaterial microfacet model
    
    Issue #224.

[33mcommit 0aa90372efce97df39cffcaa33b276d7d0772d30[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Oct 13 14:36:46 2019 -0700

    Remove pError scale in OffsetRayOrigin() when PBRT_FLOAT_AS_DOUBLE is enabled.
    
    Before, pError was scaled by 1024 in that case; the idea was that there is
    so much excess precision with 64-bit floats that it wouldn't matter to bump
    up the error that much.
    
    The problem with that is the Curve shape: because it has the behavior of
    facing the incident ray, the ray epsilon has to be fairly large--half the
    curve's width.
    
    Multiplying that by 1024 in turn totally broke spawned rays, which
    effectively wouldn't intersect anything...
    
    Fixes issue #221.

[33mcommit 202065b2496b45c9236ce15c7074ecc864d1edb7[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Oct 13 14:35:40 2019 -0700

    Fix Curve Log2 computation when Float=Double
    
    Before, it would end up calling the 64-bit FloatToBits, then letting the result be truncated to 32-bits, and then interpreting some bits of that as exponent. For a double, it ended up using random bits from the significand, rather than the exponent.
    
    Discovered while chasing down #221, though not the cause of it.

[33mcommit f2f57989c4dfb1f9e715cb8c2d05b16a41502910[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 12 16:05:27 2019 -0700

    Fix parenthesization in Transform::operator() implementations. Issue #181

[33mcommit 62b97640d75db07dcb69951c857b9b2c3757415b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 12 14:28:55 2019 -0700

    Improve EFloat::GetAbsoluteError(). Issue #167

[33mcommit 6f91dec3bf48719535bac91a26320e5a4b58f52f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 12 14:11:31 2019 -0700

    Actually use quadratic probing in the TransformCache. Issue #194.

[33mcommit f34c333bc3d7ae4684cbc80a4ee9fbd890c51824[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 12 11:14:22 2019 -0700

    Fix variable naming in AnimatedTransform constructor. Issue #231

[33mcommit e1146177c430da86143530345a0c3919a856b5a4[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 12 11:13:57 2019 -0700

    Request c++11 features for obj2pbrt

[33mcommit c88a7ce05d0da93086b6271379c6ac6b84c13b3b[m
Author: Stefan Reinhold <stefan.reinhold@chello.at>
Date:   Thu Jul 4 21:21:56 2019 +0200

    Fixing ResampleLinearSpectrum method in spectrum.cpp

[33mcommit e19f23258077527f033e925b7d1717e5142f2a2e[m
Author: Mudream <mudream4869@gmail.com>
Date:   Sat Jan 19 18:05:52 2019 +0800

    update cmake version

[33mcommit 22eded1b7c02ac1042e8a8264fc2d4cfbb3836ab[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 12 10:11:30 2019 -0700

    Fix out of bounds index in MarbleTexture. Issue #252

[33mcommit 9adaee88487772059b65bc322fb2b03ad033d9fc[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Sep 4 11:48:35 2019 -0700

    Fix bug in Film::AddSpat().
    
    (Due to the fact that the Camera importance methods return >0 importance within the sample bounds but then Film::AddSplat() just uses a box filter.)
    
    With BDPT, the pixels along the left and top edges would receive ~2x the contributions they were supposed to if a pixel filter with > 1x1 extent was used.
    
    The issue was that p would come in  with negative values in one of their coordinates between -1 and 0. The conversion from Point2f to Point2i would turn those to zero and then their contribution would be included, even though it wasn't supposed to be.

[33mcommit 3e9dfd72c6a669848616a18c22f347c0810a0b51[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu May 23 10:36:00 2019 -0700

    Fix bug in BSDF::rho().
    
    We need to transform the given wo direction to local coordinates before
    passing it along to the BxDF.

[33mcommit f7653953b2f9cc5d6a53b46acb5ce03317fd3e8b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jan 4 16:23:44 2019 -0800

    Fix ray differential computation in SpecularTransmit()
    
    See pbrt-v2 PR https://github.com/mmp/pbrt-v2/pull/38 and this discussion https://groups.google.com/forum/#!topic/pbrt/THex27EOrOE for context.
    
    Notes on the derivation of the differentials are included for reference and for future use in PBR book text.

[33mcommit 4c1f452f6882a5c45a5ae86f865e376619c73296[m
Author: SOH <zq317157782@163.com>
Date:   Sat Dec 29 14:57:32 2018 +0800

    Êõ¥Êñ∞ËÆ°ÁÆóÂ∞ÑÁ∫øÂíåCurveÁõ∏‰∫§Êó∂ÂÄôÁöÑÂèÇÊï∞

[33mcommit 2f0852ce2f6bcdb82f8305229ffd5aecff8edcfd[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Dec 29 16:31:10 2018 -0800

    Try two at disk parameterization and partial derivatives.
    
    The fix from issue #154 led to a different bug (issue #183). This switches
    back to the old partial derivative vectors via adjusting the disk
    parameterization. (Now (0,0) is on the outer ring, which isn't great, but
    seems like the least worst option.)

[33mcommit b59f1d27e77c3ea9cd45a6da1ce0c3df7fc4c55b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Dec 29 16:26:58 2018 -0800

    Revert "Fix disk dPdv computation."
    
    This reverts commit 2b55c0cff7a6213fb7564e31f231f308bd2d828f.

[33mcommit af4b70601bb770caa720c569f1641c4ddff333b7[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Dec 15 15:04:46 2018 -0800

    Fix typo in preprocessor definition.
    
    Via Hiroyuki Sakai, issue #199.

[33mcommit 3e0b2a7846c149185e57b8eb7c1cf56d8b0a7a60[m
Author: Yoshiyuki Yamariku <p.rgb.cmyamarik@gmail.com>
Date:   Wed Dec 12 21:13:40 2018 +0900

    Update sphere.cpp
    
    Fix compile error on gcc when PBRT_FLOAT_AS_DOUBLE enabled.

[33mcommit 64c2c547beb9b1488375ab431bdf302f98c57366[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Nov 24 11:37:25 2018 -0800

    Clean up code formatting to match pbrt-v3 and minimize diffs vs. the book

[33mcommit 65b78e9371cfe65983e5c0bfe38e126e19644b7f[m
Author: Wenzel Jakob <wenzel.jakob@epfl.ch>
Date:   Sun Nov 18 11:43:03 2018 +0100

    Improve numerical behavior of Sphere::Sample()
    
    The current implementation of ``Sphere::Sample()`` computes ``sinTheta``
    from ``cosTheta`` using the expression
    ``std::sqrt(1-sinTheta*sinTheta)``.
    
    While convenient and computationally cheap, this approach suffers from
    severe cancellation errors for small angles, causing the sphere to
    effectively collapse down to a point. Numerical errors start to kick in
    below ``sinThetaMax`` < 1.5 degrees in single precision.
    
    As far as numerical issues go, this isn't that terrible ‚Äî a point light
    is a relatively good approximation to a distant sphere. Yet, 1.5 degrees
    seems relatively large and we can easily do better by computing
    ``sinTheta`` directly using a Taylor series expansion. This commit
    introduces such an approximation and also reorganizes the computation to
    be a bit more efficient.

[33mcommit b07a14fa1b1bb290e7d2c0ed3d0f7446fba8a07a[m
Author: Peihong <peihongguo@gmail.com>
Date:   Mon Jul 16 00:09:20 2018 -0700

    Bug fix for TransformCache
    
    `hashTable.resize(512)` should be done after `hashTable.clear()`, otherwise the size of the hash table will be 0 after `Clear` is called. When pbrt is compiled as a library, this would lead to crash in multiple rendering passes.

[33mcommit b856f418e32977562f4c1165683f19836abf058f[m
Author: linhsu0723 <linhsu0723@qq.com>
Date:   Fri Nov 9 05:56:58 2018 +0800

    ScopedAssignment: move assignment operator

[33mcommit ebf0648bea1e6a109e813bf7be5e8b7c099fa54f[m
Author: Andrew Tinits <amtinits@uwaterloo.ca>
Date:   Thu Nov 8 17:26:36 2018 -0500

    Remove unused variable wi

[33mcommit 3a735dd62d777c072b6c5bb89c4c34f3f887b7ca[m
Author: S√©bastien Rombauts <sebastien.rombauts@gmail.com>
Date:   Thu Nov 8 01:36:35 2018 +0100

    Add Visual Studio folders using source_group() and add headers to them (#206)
    
    Without that, the Visual Studio solution does not show headers, and does group all source files from all sub-directories into on big mess.

[33mcommit 5414dc99e796a6ce4aff7fadba7f2a8fde02fdb0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Nov 2 11:19:18 2018 -0700

    Fix overflow bug in I0().
    
    ifact would overflow a 32-bit integer.
    via Matthias Raab.

[33mcommit da5af753ffb5125b811c958bc3ecd7132f958e50[m
Author: Matthias Moulin <matthias.moulin@gmail.com>
Date:   Thu Nov 1 21:22:07 2018 +0100

    Removed unused baseColor texture (#205)
    
    The single channel `baseColor` texture is already "replaced" by the n-channel `color` texture. Note that `base color` is the actual terminology used by Burley.

[33mcommit 40dc00410784cfa2503a8a12ab863ba3057c9f86[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 17 14:46:33 2018 -0700

    Update README.md for online edition of the book

[33mcommit a66471e914cde53d03f4fef31ae5089d9262f056[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 8 16:28:57 2018 -0700

    Fix incorrect error message.
    
    (via Ingo Wald.)

[33mcommit c7d261b5fdd61749d57ad20db9f9682398c05553[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 1 17:26:34 2018 -0700

    Update to latest OpenEXR.
    
    Fixes #196.

[33mcommit 30e04a05069174b46fc3b8ff3bf0d917e9fb71c6[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 1 09:25:02 2018 -0700

    Generate RGB EXRs; the alpha channel wasn't being used anyway.

[33mcommit 86b5821308088deea70b207bc8c22219d0103d65[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Aug 15 07:17:56 2018 -0700

    Remove CopyIlmBaseLibs from CMakeLists.txt
    
    Part of #196 fix.

[33mcommit e0e12ddfa1e729e1f4cb7b373cd7fbddce861a5b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jul 30 07:23:42 2018 -0700

    Don't expand Include directives with --cat and --toply

[33mcommit 5a43c9eee73bed013271444b0c54c7593e5f2fd2[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jul 29 20:48:59 2018 -0700

    Update Dockerfile

[33mcommit 81fd5fda52a9c82b4062c08e278ea72bec79f6cc[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 25 15:38:25 2018 -0700

    Also check for _WIN32 in little endian check

[33mcommit 307d1620bf75771482f5dfd1dede1da0d33b5ee2[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 25 15:06:50 2018 -0700

    Disable more chatty MSVC warnings

[33mcommit 44546d41324423fcbcb530f0a3643af4e5eb1ba1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 25 15:02:22 2018 -0700

    Fix LNK4049 warnings from glog in MSVC build

[33mcommit 03793be31cecd783e1f375f9597193a09d0246e5[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 25 14:52:59 2018 -0700

    Use folders in cmake to clean up generated MSVC solution file

[33mcommit d07d69afea359d19f28e1fe22411b8a6d6bb0323[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 25 14:38:32 2018 -0700

    Fix MSVC warning about tr1 namespace in gtest.h

[33mcommit 65a9ddf03291e81fe1f629ef2c335b347fe81150[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 25 13:42:21 2018 -0700

    Improve README.md
    
    Add more detailed instructions about MSVC builds.

[33mcommit d5e560c2301887a1e64511e79ee7bb733661c55a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 25 13:41:55 2018 -0700

    Specify float/double and RGB/spectral rendering via cmake config variables

[33mcommit 9c707675837967604eeee7ec35789a10c8676c84[m
Author: Charles de Rousiers <charles.derousiers@gmail.com>
Date:   Mon Jul 16 00:01:02 2018 +0200

    Fix double radians conversion, reducing the effect of the alpha parameter on hair appearance (#189)

[33mcommit f80c3cf78ba6a94b2cec5c01d354e6620a9df42c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jul 13 16:30:42 2018 -0700

    Fix Windows file memory mapping to work with large files (>2GB).
    
    Fix thanks to Steve Booth.
    
    Also, remove a gratuitous and inefficient string copy of the mapped file.

[33mcommit 9f717d847a807793fa966cf0eaa366852efef167[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jun 18 16:26:11 2018 -0700

    Fix (for real this time) buggy ProjectionLight cosTotalWidth initialization

[33mcommit 53e2f99b74a74b4654b7251507c710ca2966d927[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jun 18 16:24:12 2018 -0700

    Fix race condition in StatRegisterer constructor

[33mcommit 63a069937343178bd86c268be00fe65204fbc4ad[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon May 14 16:53:39 2018 -0700

    Allow empty quoted strings in the parser

[33mcommit 3dbff2586596621567e2f5d34d8aa8c262b6d3e6[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri May 11 19:41:57 2018 -0700

    Parser: exit out more quickly on errors
    
    Fixes some crashes on things like unterminated strings.

[33mcommit 8cdce12d49cb655205143cbb9ff303e51c14424c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri May 11 19:41:04 2018 -0700

    SPPM: don't trace rays with zero contributions

[33mcommit 924ad9231944cdcbdb9707ee72fe19fe1f3dc8ff[m
Author: soma <soma-arc@users.noreply.github.com>
Date:   Tue May 8 05:32:18 2018 +0900

    Fix arguments handling (#187)

[33mcommit a2dc0c227d320652f0d54bf4eef5d5060f6cd98d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Apr 26 16:56:35 2018 -0700

    Fix error handling in decodeEscaped()
    
    Fixes #186.

[33mcommit ed57aff6cbd04af7f2e3b6d98bfc40cce97a8099[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Apr 9 09:45:56 2018 -0700

    Update CHECK_NOTNULL calls

[33mcommit 358282ba8b2edf1d619b7516eb394394cfae2a3d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Apr 7 14:43:21 2018 -0700

    ptex build cleanup in CMakeLists.txt
    
    Disable building shared libs (we don‚Äôt need them, and they‚Äôre
    problematic when we‚Äôre building zlib as well, since we only build a
    static zlib)

[33mcommit 11a5c84b2489b31ded28ecb164a5318fb331e886[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Apr 7 14:29:04 2018 -0700

    Update to latest ptex

[33mcommit 42c42c194bab970d8adc3f6b5e3afbbc172c3375[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Mar 29 17:16:46 2018 -0700

    Always evaluate all BxDF components in BSDF::Sample_f
    
    As noted by Âç°Âç°Ë•ø on the pbrt mailing list, the current implementation
    can have light leaks if the sampled direction is under the surface.

[33mcommit 50bec5e8079d2226d61affda22f802031cbd248a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Mar 29 12:57:12 2018 -0700

    Remove comment and update DisneyClearcoat f() to be more clear.

[33mcommit 72d459ef6e5481c5cfd4c3076cccacabf7c1b3fb[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Mar 29 12:27:52 2018 -0700

    Clean up handling of zlib in CMakeLists.txt
    
    Possibly helps issue #174

[33mcommit af3fb9286f28ba501b98b8fed1a1d06f7d43e285[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Mar 29 12:26:25 2018 -0700

    Fix DisneyBSSRDF::S().
    
    Sw() was adding an extra Fresnel term and an unneeded normalization
    scale.
    
    Issue #173

[33mcommit efd179360783c08da0e6d8146c5f02a4bac624c0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Mar 29 08:30:58 2018 -0700

    Remove excess cos theta terms from DisneyClearCoat::f()
    
    These are actually already present, via SmithG_GGX(). Empirically,
    adding these also made the BxDF non-energy conserving.
    
    (Issue #172).

[33mcommit b3c10a853757462cf77ff9b40bbe3b9f7b137296[m
Author: liftA42 <lifta42@outlook.com>
Date:   Fri Mar 30 02:36:45 2018 +0800

    Fix unit test for print util (#166)

[33mcommit 8dbd937584c48a4e82261b8aefbab9141dae9171[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Mar 6 16:41:53 2018 -0800

    Add distance scale factor to DisneyBSSRDF

[33mcommit bec9f8bb675dd43cd5b345dcde5f8fca1b13a048[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Mar 5 11:40:39 2018 -0800

    Run clang-format on parser.cpp

[33mcommit 277d749e7096642a914ced3a297651ad523c31f7[m
Author: Immocat <zejianwa@usc.edu>
Date:   Mon Mar 5 08:23:21 2018 -0800

    fix_DisneyClearcoat_bug v1 (#172)

[33mcommit 086165b244e17c08dad327812a119b95f02d566c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Mar 5 08:00:09 2018 -0800

    DisneyMaterial updates
    
    Address a few issues identified by Evgenii Golubev; thanks to Brent Burley
    for additional clarification.

[33mcommit aaecc9112522cf8a791a3ecb5e3efe716ce30793[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Mar 2 11:55:41 2018 -0800

    Work around MSVC2013 limitation

[33mcommit 9443443b118d878a84736b0871c37db6a54f03f9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Mar 2 10:23:56 2018 -0800

    Allow specifying image crop window via the command-line

[33mcommit ac4f6f8e4729e9d40b9d2a67e173ca45d843120c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Feb 27 15:35:46 2018 -0800

    Record VolPathIntegrator path length with an integer distribution
    
    Issue #176 via @abusch.

[33mcommit d9b8fdf05408161744cc167c01d54d0472be1c30[m
Author: Alexandre Baron <Scylardor@users.noreply.github.com>
Date:   Mon Feb 19 00:28:03 2018 +0100

    Make the parser use file memory-mapping on Windows too. (#175)
    
    * Make the parser use file memory-mapping on Windows too.
    
    * Omit \r characters in comments and scope the test tokenizer to make unit tests happy

[33mcommit 033a800d565ddc634b8f207e286be36c7f1c95a5[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Feb 18 14:43:54 2018 -0800

    Triangle: compute dndu and dndv even if the parameterization is degenerate

[33mcommit 57f1196bb20fa510725b56a8ea8cdc4c90cdd338[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Feb 17 15:38:52 2018 -0800

    Fix rare attempt to Normalize() degenerate vector in Triangle intersection
    
    With frame380 of the measure one scene, a ray would occasionally be
    reported hit a triangle with zero area that we'd then try to compute a
    normal for.
    
    Added a test for that specific case.

[33mcommit 5f2df75735c742a9552cb85e519c23d1ebbad138[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Feb 16 13:44:13 2018 -0800

    #include cleanups

[33mcommit 44a8beff9b774a51286ba4412150fc20a70f45bb[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Feb 16 11:05:53 2018 -0800

    Move ParseFile to official api: pbrtParseFile
    
    Also add pbrtParseString()

[33mcommit 2fdc101fdadd20f968dc060899d77022d493bddf[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Feb 16 11:05:04 2018 -0800

    Forward declare TransformedPrimitive in pbrt.h

[33mcommit 0db56eba19754271bcd016d599dcad11ceb47744[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Feb 14 19:19:10 2018 -0800

    Remove unused parser detritus

[33mcommit 55a041cb07d2ce985eef07b4407d42a372285359[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jan 26 13:48:49 2018 -0800

    Fix printing of boolean parameters in --cat/--fmt

[33mcommit 188d17310f13e4835607765fc2a2cdfad06bbee9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jan 15 16:24:10 2018 -0800

    homebrew modifications to hash functions are a bad idea

[33mcommit 664b656a7fd937822bcfcaba31d896c67170e27e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jan 15 14:14:03 2018 -0800

    Curve: look for splitdepth as an integer parameter
    
    (Still accept it as a float for backwards compatibility)
    
    Issue #171.

[33mcommit 001f119c1e6d3f406faa7fdf79ed9e52beca0593[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jan 12 16:11:21 2018 -0800

    Remove unneeded unistd.h check from CMakeLists

[33mcommit 798a6307cc5feed7a7bb7e9c2ce2b4c92cc90aa2[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jan 12 16:06:22 2018 -0800

    Improve error checking for missing submodules

[33mcommit ffa9d4ffc2d40f25e73d1e525599d1e559caa9ee[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jan 12 15:56:57 2018 -0800

    Remove mention of flex and bison from README.md

[33mcommit 19006ae3088659794cc78b9ad59f072f89bc5e49[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jan 12 15:56:46 2018 -0800

    Fix possible invalid memory reference in ParseFile()

[33mcommit 04503c137283db890c5bb55072430f9ab94f06aa[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jan 10 06:05:02 2018 -0800

    Fix bug in handling of ungetToken in parser
    
    The parser would crash if an unget was done after the last token in a
    file was read (and thence, the file had been removed from fileStack)

[33mcommit eb9dbe68a71d096bd6e78b36f55683f3f68504c6[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jan 7 16:00:01 2018 -0800

    Fix bug in ptex gamma correction

[33mcommit 5a7a2702435a006694cdd37731e341148304ae98[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jan 7 15:41:50 2018 -0800

    Ptex improvements
    
    Optionally apply gamma correction to returned values (2.2 default)
    Set max texture cache size to 4GB

[33mcommit 65d90464ad30c83d8e7e256c6e0daddca0c6d7ca[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jan 7 15:18:30 2018 -0800

    Improve performance of AttributeBegin/AttributeEnd
    
    Use a copy-on-write approach for textures and named materials to avoid
    making unnecessary copies of the underlying std::maps.

[33mcommit f9a8b05db82e1be0c54ba3da7987281cddbe2bfe[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jan 7 15:17:38 2018 -0800

    Bump printed copyright to 2018

[33mcommit ea34ef7452601e53c3c3ade4cce11ec5e55e49d2[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jan 7 15:16:55 2018 -0800

    Rewrite scene file lexer and parser by hand (#169)
    
    * Rewrite scene file lexer and parser by hand
    
    This substantially reduces time parsing very complex scene descriptions.
    
    Removed the old flex/bison-based parser.

[33mcommit 5fdf46dd7c36a63d2d06013db3949344ab51734c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jan 2 17:10:47 2018 -0800

    Remove unused array in ReportProfilerResults()

[33mcommit 0f8bdae54c0a676cc86c254f53f00c3c2d5bcb51[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Dec 29 15:49:20 2017 -0800

    Attempt to fix MSVC2013 build

[33mcommit 1a8f8eea656937f31a49fe7550994d17028fce39[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Dec 29 14:47:48 2017 -0800

    Improve TransformCache Hash() performance
    
    Also, refactor into a few more methods, for better visibility into
    what‚Äôs happening when profiling.

[33mcommit d65ff430edca5039f0aa40310b7026e377407ab3[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Dec 29 08:50:18 2017 -0800

    Improve TransformCache stats
    
    Fix error in order of counters for number of hits and lookups.
    
    Add a stat to track the number of probes per lookup (make sure nothing
    is going wrong with the hash function)

[33mcommit 9e9e13980aeeca15217d9712fee685b304fb5e26[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Dec 28 14:49:43 2017 -0800

    Add -ptexquads option to obj2pbrt

[33mcommit 1a74748139d103636ce26139c739c75a7d67eebe[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Dec 28 10:18:51 2017 -0800

    AnimatedTransform: don't decompose xforms if there is no animation

[33mcommit 0fe355f64e5d4fb7c66a2476717f6a957d2d02ef[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Dec 27 16:39:02 2017 -0800

    LOG(INFO) around Include directives in scene files

[33mcommit dda0192d45af9956596ad82cd6c2c59ef016892a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Dec 27 16:38:43 2017 -0800

    Reimplement TransformCache in core/api.cpp
    
    Switch to a custom hash table rather than std::map and don‚Äôt
    necessarily store inverse transforms.
    
    Significantly reduces memory requirements (~3x) and improves
    performance when there are many transforms in the scene.

[33mcommit e73c8fced471646fe14c66b3d73d0311c4d09923[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Dec 27 12:00:36 2017 -0800

    Toply: don't increase file count if no file is emitted

[33mcommit dd93014ed7ea1f4261bee392d9e9916a0cd4d27a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Dec 26 14:41:28 2017 -0800

    Fix bug in -toply for meshes without faceIndices

[33mcommit 3dae5fa7c0ed0dbd4fe2104179a5f7b8a0ea08a3[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Dec 26 07:44:45 2017 -0800

    Improvements to -toply
    
    - Leave small meshes (<500 indices) as is rather than possibly making
    lots of small ply files.
    - Pass through everything in the ParamSet except what went into the ply
    file. (In particular, don‚Äôt lose material parameter overrides)

[33mcommit 5c8f41fa6da95ae9fb81dd6cef70546778509e11[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Dec 26 07:43:01 2017 -0800

    Accept partial scene files without errors with -cat and -toply

[33mcommit 6870bc7750b0f32c0e3ffa569eae2e8e0f8c268d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Dec 25 09:39:54 2017 -0800

    Add support for faceIndices in PLY files

[33mcommit 1b319b56173bfca7a6e59bd4f502687b4f1514e2[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Dec 24 09:58:53 2017 -0800

    Remove logging call that broke tests

[33mcommit 49aa73db5dea7fc28afdb929bdd66154ef9a9f9b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Dec 24 09:32:38 2017 -0800

    Reserve space in primitives vectors in pbrtShape

[33mcommit c842c37f93f8ef69e607a3b3ff703169e470c4f4[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Dec 24 09:32:25 2017 -0800

    Use std::move for primitive vectors passed to accelerators

[33mcommit 89d65e836c3c53beb53fb8b96708d5a71dd1e8a8[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Dec 24 09:31:34 2017 -0800

    BVH: reduce peak memory usage during construction

[33mcommit 03435f2f1493c2d2964a71092466b2bdf4d413ac[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Dec 24 06:20:26 2017 -0800

    Account for faceIndices in TriangleMesh memory accounting

[33mcommit 6274b68e2de23ac9021fc57a492f434390bc4f7f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Dec 23 16:08:36 2017 -0800

    Free RenderOptions in pbrtWorldEnd before printing stats

[33mcommit 5d6439dfcb9fda85169536ecfb71dbf164e97330[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Dec 23 12:00:37 2017 -0800

    Add stat on memory used by Primitives

[33mcommit 618941dfbb2290fa0073de00fb0fd20ea6695f14[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Dec 22 15:56:21 2017 -0800

    Fix variable naming in LookAt()
    
    via Mike Day.

[33mcommit b501c4e2945dd318b8f299c92a52d055b5fb7986[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Dec 18 13:11:36 2017 -0800

    VolPathIntegrator: set specularBounce to false after medium interactions
    
    via Bruno Pera

[33mcommit 2b55c0cff7a6213fb7564e31f231f308bd2d828f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Dec 18 11:47:49 2017 -0800

    Fix disk dPdv computation.
    
    Issue #154, via @ksmolenskiy.

[33mcommit e7140ddcd58c9f959b6fa0c3e6a203628a112d62[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Dec 18 11:08:58 2017 -0800

    Fix bug in HomogeneousMedium::Sample()
    
    Reported by Srinath Ravichandiran, also issue #159.

[33mcommit 6049a4e52c873e96571e8e33cf457d5475fdf325[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Dec 8 11:27:34 2017 -0800

    Fix bug in printed pixel coordinate with imgtool cat --sort

[33mcommit 0cd009e517fd9e3798977bd1c32d669d232ac223[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Dec 8 11:26:56 2017 -0800

    Add bucket logging to BDPT integrator

[33mcommit 781b0570b427d3e4e990cb0b749cac21c8638750[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Dec 3 13:12:49 2017 -0800

    Revert "Improved solution to the rings artifacts in RealisticCamera"
    
    This reverts commit a91d110d083f6e41fb72d4d3434b7d21ca756f40.
    
    This turned out to not always work: the issue is that the actual area of
    the exit pupil varies a bit over each bucket such that the actual fraction
    of vignetted rays varies, which in turn leads to ... banding.

[33mcommit a91d110d083f6e41fb72d4d3434b7d21ca756f40[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Dec 2 06:54:54 2017 -0800

    Improved solution to the rings artifacts in RealisticCamera
    
    Now, images have generally the same pixel values as regular projective
    cameras again, (modulo the cos^4 falloff, which we want).
    
    Issue #162.

[33mcommit 6fefc5ca3e534e2c71d61dc9da88c7bcd3edb995[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Dec 1 15:41:48 2017 -0800

    Attempt to handle tricky curves better when computing derivatives

[33mcommit 348df2fae2100d2ef8addc8790619f67a840bd26[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Dec 1 14:43:45 2017 -0800

    Fix the rest of the RealisticCamera ring artifacts
    
    Issue #162

[33mcommit 3968b4100933bf3a368a26006ec73b4687948a0c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Dec 1 13:33:20 2017 -0800

    Improve robustness of Camera::GenerateRayDifferential
    
    Reduce the frequency of times where the main ray makes it through but
    one of the auxiliary rays is vignetted with the RealisticCamera:
    
    1. Use a smaller spacing for the forward difference
    2. Try again in the other direction if we fail the first time.
    
    This helps with some of the radial artifacts that are sometimes present
    with that camera.
    
    Partially addresses issue #162.

[33mcommit 35ff3d1468970a4b2de53a2fd96036f0a4fc6678[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Nov 28 13:07:08 2017 -0800

    Fix bug in Bounds Union() functions
    
    An infinite bound would be computed if two empty bounds were provided
    to Union().
    Added some unit tests.

[33mcommit 111eb969ad7866fbdb5451eb8faf2cb97f9e8d6d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Nov 28 12:17:38 2017 -0800

    Fix rare bug in BSSRDF surface intersection code
    
    Due to round-off error, sometimes we'd try to shoot a ray to the offset
    point we were starting from, leading to a (0,0,0)-valued direction.  Stop
    looking for more intersections when this happens.

[33mcommit 16d8a6873dc33a032d34a6a68295278eb55d07e0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Nov 27 11:20:14 2017 -0800

    Minor README edits

[33mcommit bc25f25014f3585e21387d0ea99f2b63c28a84c9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 22 16:06:08 2017 -0800

    Add support for b-spline basis and degree 2 curve shapes

[33mcommit b24b321bed7fa812cdb125997c735c466d5ab3fb[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 22 06:23:15 2017 -0800

    Rebuild core/pbrtlex.cpp with flex 2.6.4
    
    Removes usage of the deprecated ‚Äòregister‚Äô keyword in generated code.

[33mcommit 15ba40ac2ae24d6ab737d1beeaff948b033e808d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 22 06:22:29 2017 -0800

    Remove register keyword from obj2pbrt.cpp

[33mcommit ef9a2debba62107b22ff429dbba2c26933694b75[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 22 06:11:32 2017 -0800

    Bugfix: copy faceIndex when transforming SurfaceInteractions
    
    This had broken use of ptex textures with object instances.

[33mcommit bda62e36271ee1f9a2c40091e804ecc8344b2ff7[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Nov 9 18:49:11 2017 -0800

    Increase priority of --outfile w.r.t. Film parameters
    
    Now, if -outfile is provided on the command line, that is the output
    file, regardless of the filename provided in the Film parameters.

[33mcommit 6ef7ff7989c18efa34d99798971df73b2cfb5c63[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Nov 7 06:05:55 2017 -0800

    Fix silly bug in average pixel values reported by imgtool info.

[33mcommit 6d7bee80c3d816cac1f6a1b743feb0879a64524c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Nov 6 16:19:16 2017 -0800

    Fix typo

[33mcommit 22a154488dd20f21a006828eeb335f757e5a2aea[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Nov 6 16:18:07 2017 -0800

    README edits

[33mcommit 252915d94d78d94f01833d469d2de2c58ac4a466[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Nov 6 16:09:56 2017 -0800

    Add scenes/killeroo-simple.pbrt

[33mcommit eafd87d4ea3d6beb42f5e31a400a2158c4bee0f8[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Nov 6 13:46:15 2017 -0800

    Fix typo in e26756274996d01fcf73a311f08a4292ea0f1f65

[33mcommit e26756274996d01fcf73a311f08a4292ea0f1f65[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Nov 6 13:42:24 2017 -0800

    Handle ray differential perpendicular to tangent plane case in ComputeDifferentials().

[33mcommit 225f4c06c6185547856a6eb0e9ddaa1162958c2b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Nov 5 13:08:43 2017 -0800

    Add warning for 32-bit builds

[33mcommit a881c852833aef0895192df01b2a0bbb018f5963[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Nov 2 05:43:19 2017 -0700

    Allow Shape parameters to override NamedMaterial parameters

[33mcommit 1c55a3bd28550257ef5faaac00e984232af71090[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 1 14:14:17 2017 -0700

    Fix obscure bug in prioritization of shape/material parameters
    
    When creating Materials, the intent was that shape parameters override
    parameters given to the material when it was originally created.
    However, the way it was implemented was:
    
    1. Shape texture parameters
    2. Material texture parameters
    3. Shape non-texture parameters
    4. Material non-texture parameters.
    
    Thus, given something like:
    
    Material ‚Äúfoo‚Äù ‚Äútexture Kd‚Äù ‚Äútexmap‚Äù
    Shape ‚Äúbar‚Äù ‚Äúrgb Kd‚Äù [ 1 2 3]
    
    the shape override wouldn‚Äôt be used. This fixes that.

[33mcommit e5811e5044fd671244edef6c09329ab7340bd3fc[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 1 09:49:39 2017 -0700

    Fix bug in reporting of unused shape parameters
    
    Previously, we‚Äôd issue a warning about an unused parameter for shape
    parameters that actually were used for the material.

[33mcommit b17faa35d9fcc852e825cf3b388f5cbac1a30af0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 31 09:22:03 2017 -0700

    Support --quick in AOIntegrator

[33mcommit 097533b2629f2dbc7db081e2553dbd9767c9df4f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 31 07:49:10 2017 -0700

    Remove unused variables.

[33mcommit 8c26d152fad1ffaa8a97a98523fe8340a3d9ebc1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 31 07:48:56 2017 -0700

    AOIntegrator parameter fixes
    
    Remove ‚ÄúrrThreshold‚Äù, which isn‚Äôt used.
    Fix a string parameter to ParamSet::FindOneBool that should be a bool.

[33mcommit d0d62ffad2d397d5e899f755a437aefff8b8e74d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 31 07:48:27 2017 -0700

    Add explicit instantiation of ImageTexture templates
    
    Silences a few compiler warnings.

[33mcommit fab73481b835f5e022f043538d6c410af3aab7f6[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 31 07:47:33 2017 -0700

    Add virtual destructor to BSSRDF class.

[33mcommit ad5687d29a148f1453547ae002f11db30c439846[m
Author: teesel <tomeksul@gmail.com>
Date:   Thu Oct 26 00:56:58 2017 +0200

    Cygwin build fixes. (#158)
    
    * Cygwin build fixes. https://github.com/mmp/pbrt-v3/issues/155
    
    * HAVE_ATTRIBUTE_NOINLINE is chosen first
    
    * Revert __declspec(thread) unescaped

[33mcommit a95b0bc97f79785dbbf2576019d730084677b492[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 25 12:23:53 2017 -0700

    Revert "Fix small bug in Interaction::SpawnRayTo()."
    
    This reverts commit 142d72ffe4783c41a9c681c80911c5bf4a161f49.
    
    This fix breaks the Triangle.Reintersect test. No time to dig into why now,
    so reverting for now.

[33mcommit 050bff6c74f9b1ea36fb51a4d2fccbf61d26861c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 25 11:58:38 2017 -0700

    CMakeLists: remove escaping for __declspec(noinline)

[33mcommit 142d72ffe4783c41a9c681c80911c5bf4a161f49[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 25 11:38:21 2017 -0700

    Fix small bug in Interaction::SpawnRayTo().
    
    Via @grzegorz-k-karch.  Issue #137.

[33mcommit ace731430268191a17dbdbf05cb88c45fe1691e0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 25 11:33:26 2017 -0700

    Attempt to fix Cygwin build.
    
    Issue #155.

[33mcommit 39df44b4ba61e6f7408222460dd85d9966afd538[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 18 11:54:10 2017 -0700

    Fix bogus computation of cosTotalWidth in ProjectionLight.
    
    This caused sampling outgoing rays to be incorrect, missing much of the
    image, which led to bogus results with e.g. BDPT.

[33mcommit 8e2438f9d9cfae914f37da629dd09fcf7c6f142b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 14 10:51:31 2017 -0700

    Pass temp file paths through a path remapping function in tests.
    
    This is a no-op here, but allows a single point of modification in an
    environment where tests aren't allowed to write to $CWD.

[33mcommit 9d36d8df89c37fdf9466c51bbb1cdc4a1f4a805b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 5 08:02:56 2017 -0700

    Attempt to fix Travis build

[33mcommit f9a01c0a672f01a4757aac7105485411bc4d3b18[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 5 06:16:19 2017 -0700

    Fix masking-shadowing term in Disney BSDF (@awangk)

[33mcommit 13f73b323d34b010a4ac03073cfdff425b53a533[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Aug 30 05:53:24 2017 -0700

    Fix PBRT_FLOAT_AS_DOUBLE build error in ptex code.
    
    Issue #151.

[33mcommit 77bde84f69f169090e461dcce24d79820d6df940[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Aug 29 17:12:24 2017 -0700

    Fix a few MSVC warnings

[33mcommit fc161cc691be3545a46d1221841b5597814f6c4a[m
Merge: d153149 52f8b5a
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Aug 29 17:07:16 2017 -0700

    Merge pull request #147 from rcythr/bugfix/sobolSamplerWarning
    
    Fixed a minor bug in the warning message of sobol sampler.

[33mcommit d15314955166201ccb31af17b94b1489ee6e075c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Aug 29 15:15:00 2017 -0700

    Improve temp file cleanup in tests

[33mcommit f672c9eb72a87bb07fcba073e4703558768700c9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Aug 29 15:14:45 2017 -0700

    appveyor: add VS2017, config file formatting

[33mcommit 3d6f3ddf4742b4da836191826b58929a76bd99fe[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Aug 5 16:26:47 2017 -0700

    Fix buggy Bounds Intersect() functions.
    
    For non-overlapping bounds, we'd like to return an invalid bounds (min >=
    max), but the old implementation didn't do that, since it ran the extent
    through the Bounds constructor, which in turn takes the element-wise min
    and max of the Points passed to it.

[33mcommit e211ba4268bd2a665380a8af59d3ffc16427ba7d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Aug 5 16:10:40 2017 -0700

    Fix arguments passed to Pdf_Le() in BDPT integrator.
    
    Time is the 4th argument, no the third (which is max t).

[33mcommit 23ba8033097cf2eefff3cba21c560dfe6e4c7d8c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Aug 5 16:09:02 2017 -0700

    Fix progress reporting for MLT bootstrap samples

[33mcommit 52f8b5a7d22ead70e4b7c5c178816556e990e3cc[m
Author: Richard Laughlin <richardwlaughlin@gmail.com>
Date:   Sat Jul 29 11:22:11 2017 -0400

    Fixed a minor bug in the warning message of sobol sampler. It errorneously claimed to have rounded up to the non-power of two. It now prints the correct rounded up samplesPerPixel variable.

[33mcommit a8c3616c323861e1a098dec918342175d147297d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 26 06:44:10 2017 -0700

    Fix masking-shadowing term in Disney BSDF

[33mcommit b8801291155baa34130bd8c8ce595f58ff2c05a7[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 25 08:08:20 2017 -0700

    Fix Windows build.

[33mcommit ca3fa7273a1c10798bded6ed3422a5175dd3e2eb[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jul 24 20:20:30 2017 -0700

    Fix debug builds
    
    (Workaround issue in ptex CMakeLists.txt file
    https://github.com/wdas/ptex/issues/28).

[33mcommit 09fa96b4f4f4b7cab5c5182501c53a1541ca837b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jul 22 13:43:10 2017 -0700

    Disney BSDF: update specular Fresnel term
    
    (It should now be correct.)

[33mcommit dfdc95604133cb7df48bfb67b097d7786b0d06fe[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jul 22 13:41:49 2017 -0700

    Fix edge case in SpotLight
    
    If there was a zero-sized falloff region, we would very rarely divide
    0./0. and get a NaN.

[33mcommit d42c4b08a8abeae203b201de8e7103d461014b67[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jul 22 13:37:48 2017 -0700

    Rewrite much of CMakeLists.txt
    
    Be better about detecting the compiler's/system's capabilities rather than
    have a bunch of hard-coded "if this is FreeBSD, then <memory.h> is
    available" sort of stuff. (Similarly for detecting C++11 features.)
    Similarly, in code, the #defines to be checked are based on language
    features, not compilers or compiler versions.
    
    This should improve portability overall.
    
    Along the way, got rid of port.h, which is basically unneeded now.

[33mcommit 62e79cb837aab1c76469c740194a3b6ae3ac50f7[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jul 22 08:26:19 2017 -0700

    Fix Windows build

[33mcommit b57b56cadd2e11ab3ad5d79b404234ca8b3871d9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jul 21 06:32:26 2017 -0700

    Add support for Ptex textures

[33mcommit f6edb5f1c32404af781484a2c638a24deea1ac53[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jul 21 06:11:59 2017 -0700

    Reorder cleanup after rendering
    
    Make sure various destructors run before we report stats, so that code
    in destructors can provide data to the stats system.

[33mcommit d9bfba3e9f185894a67563e9c52b55381fcfeef4[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 11 17:07:05 2017 -0700

    Added implementation of Disney BSDF
    
    Specifically, this is the extended model with integrated subsurface
    scattering described in
    http://blog.selfshadow.com/publications/s2015-shading-course/burley/s201
    5_pbs_disney_bsdf_notes.pdf.

[33mcommit 0d5fd12da743a4833c8570bcbf5e93c5d9c23159[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 25 09:01:31 2017 -0700

    Improve log() computation in Beckmann microfacet normal sampling.

[33mcommit 906498653a738ba71bde9d65ab0df99b5bcd96c9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 11 13:42:09 2017 -0700

    Add check for backwards-facing rays in RealisticCamera
    
    Fixes issue #92. Many thanks to @takiyu for chasing down the problem and
    proposing a solution, and @syoyo for an alternative solution, which I've
    incorporated here.

[33mcommit 419405366b48c83afd9b0d7ca508bbd9bd8c4bdd[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 11 13:29:14 2017 -0700

    Improve focus ray search in RealisticCamera
    
    Via @syoyo‚Äôs PR #123, but manually merged so as to not pick up
    formatting changes.

[33mcommit 8fa49b1491bfc9b0772dd8b510ca41eaab19ec99[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 11 13:18:28 2017 -0700

    Fix typo in 525a3ee69bd75b8d2f67dde015d11382e76e6e58
    
    Fixes #134, #135, and #136.

[33mcommit f5da1aea2d400d2635f7526ba0fc1ea8649df331[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 11 10:58:38 2017 -0700

    Attempt to fix use of std::max_align_t in MemoryArena
    
    Both gcc < 4.9 and MSVC 2013 had issues with the original approach.

[33mcommit ea63ae993302c052434f577ba0d3b71da613d971[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 11 10:25:09 2017 -0700

    Use std::max_align_t for alignment in MemoryArena

[33mcommit c9be20949ef0252adf2f71e87085248866a71c04[m
Merge: ae6fa4f 9a95909
Author: Matt Pharr <matt@pharr.org>
Date:   Thu May 11 09:07:50 2017 -0700

    Merge pull request #130 from Mx7f/patch-1
    
    Fixed imgtool diff saving.

[33mcommit 9a9590923402debfc7addc9db725c13375edc85d[m
Author: Michael Mara <mikemx7f@gmail.com>
Date:   Wed May 10 21:05:13 2017 -0700

    Fixed imgtool diff saving.
    
    RGBSpectrum::FromRGB is a static function, not a mutator method, so we need to explicitly write into the diffImage array.

[33mcommit ae6fa4f18192d61fe65c3219ca47c0ed7e129ecf[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue May 9 10:05:38 2017 -0700

    Add ambient occlusion integrator

[33mcommit 957018c77c692a901f0881a536ea062c1addb675[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Apr 22 15:33:57 2017 -0700

    Improve detection of whether setitimer() et al are available.
    
    In particular, fixes the Cygwin build.  Issue #127.

[33mcommit d7ede46f5395677aba28558b14dfcf5402b8cd4b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Apr 22 15:28:52 2017 -0700

    Fix build for Spectrum = SampledSpectrum

[33mcommit c32052d757b1fe10498bf3ca1d88490567079af0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Apr 18 07:47:29 2017 -0700

    obj2pbrt: don't emit unnamed materials

[33mcommit c44e009b600ed3b4c8c42b2513a5758a89a4f501[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Apr 15 16:35:19 2017 -0700

    Remove excess allocation in FourierBSDF::Pdf()
    
    (Jaiyin Cao)

[33mcommit a71898d7a67cd3663e97d6ffae879cb562960d2a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Mar 11 08:30:14 2017 -0800

    Fix Windows build.

[33mcommit 2f73f777943d8dce328079153464cc77f605e7ed[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Mar 11 07:24:19 2017 -0800

    Attempt to work around lack of _BitScanReverse64 on WIN32 builds.
    
    (Untested.)

[33mcommit f61688378e40f4ab5c6f052bbe50be80ab4382ff[m
Merge: 2d76f2f 525a3ee
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Mar 11 07:17:01 2017 -0800

    Merge pull request #122 from syoyo/focaldistance-coeff-check
    
    Add assertion to avoid passing negative value to sqrt().

[33mcommit 525a3ee69bd75b8d2f67dde015d11382e76e6e58[m
Author: Syoyo Fujita <syoyo@lighttransport.com>
Date:   Fri Mar 10 01:51:33 2017 +0900

    Add assertion to avoid passing negative value to sqrt().

[33mcommit 2d76f2f9ba4a56ab971729bff6582ee20a8ca96f[m
Merge: 0509bf8 78fe685
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Mar 5 09:10:44 2017 -0800

    Merge pull request #118 from syoyo/cmake-sanitizers
    
    Cmake sanitizers

[33mcommit 0509bf878c9b9a76153cb6503608f5778f02601b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Mar 5 08:54:00 2017 -0800

    Update path where the local version of cmake lives.
    
    This should fix the Travis CI build in PR #118.

[33mcommit 78fe68544757cb0b7b0f7a5a0894cad15ab1de99[m
Author: Syoyo Fujita <syoyo@lighttransport.com>
Date:   Sun Mar 5 19:44:31 2017 +0900

    Do not link pbrt for cyhair2pbrt and obj2pbrt(linking pbrt is not required for these targets)

[33mcommit 1cc11c76deba07aa63412c7a1213aaca96b5fb7e[m
Author: Syoyo Fujita <syoyo@lighttransport.com>
Date:   Sun Mar 5 19:40:20 2017 +0900

    Add sanitizers build support in cmake.

[33mcommit 2401e3a1af40808a442be0ae07a0a48a20042d7d[m
Merge: 9f0c175 6374a08
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Mar 4 09:16:01 2017 -0800

    Merge pull request #116 from samsymons/imgtool-documentation-typo
    
    Fix an imgtool documentation typo

[33mcommit 6374a08725a37f52aba9a432517aacb217f1b1dc[m
Author: Sam Symons <sam@samsymons.com>
Date:   Mon Feb 27 10:16:18 2017 -0800

    Fix a documentation typo in imgtool.

[33mcommit 9f0c175cf1c58b36572526bea2d6902284bb2c36[m
Merge: cd350e8 d4bb1be
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Feb 4 14:28:07 2017 -0800

    Merge pull request #112 from abusch/master
    
    Remove unused FresnelDielectric from GlassMaterial

[33mcommit cd350e8c973dcd317c7da38a75b6e7ea1572e055[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Feb 4 14:26:18 2017 -0800

    Fix bugs with trying to render an empty image.
    
    Also added a test for the ParallelFor2D() bug this uncovered.
    
    Issue #113.

[33mcommit d4bb1bedfcb5bf371fa0766f14ea6d59d176f5cb[m
Author: Antoine Busch <abusch@atlassian.com>
Date:   Thu Feb 2 09:23:28 2017 +1100

    Remove unused FresnelDielectric from GlassMaterial

[33mcommit 4b4bf73842c354fa968872e4eeb88976797a4a3c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jan 19 17:00:21 2017 -0800

    Significantly improve parallel scalability of SpatialLightDistribution.
    
    Remove the sharding approach and instead use a single lock-free hash
    table. (This is made easier, since we only need to handle insertion and
    lookup--not deletion.)
    
    On a 2 core/4 thread system, a version of the straight-hair scene in the
    scenes distribution goes from 18.27s in SpatialLightDistribution lookup to
    0.66.
    
    On a 16 core/32 thread system, a version of the bathroom scene with path
    tracing goes from 36.7% of runtime in SpatialLightDistribution lookup to
    0.97%; overall rendering time drops accordingly from 227.5s to 132.5s.

[33mcommit 4a486cd0ee92fb7bb9e518ff5eee97e20a24b636[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jan 19 16:58:09 2017 -0800

    Add missing degrees->radians conversion for Hair alpha parameter.
    
    Issue #111.

[33mcommit 5011b6da53efa902de2266f271a71ea0265c92c7[m
Merge: b5e45e4 35b6da3
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jan 12 19:37:47 2017 -0800

    Merge pull request #110 from abusch/patch-1
    
    The third edition of the book is released :)

[33mcommit 35b6da3429526f2026fe5e5ebaf36d593e113028[m
Author: Antoine B√ºsch <antoine.busch@gmail.com>
Date:   Thu Jan 12 21:29:28 2017 +1100

    The third edition of the book is released :)
    
    Update the README.md file to reflect the fact that the third edition of the book is now actually released

[33mcommit b5e45e402ab94df503e280c89994b4aba3e29a80[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jan 11 16:46:46 2017 -0800

    Fix bug in computing aggregate profiler stats.
    
    In some cases, we'd inadvertently zero out partially-accumulated sums,
    which in turn gave incorrect printed results.

[33mcommit bbcb086f9223cec4d443cf0dbce64ab3bf67d1d6[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Dec 22 13:07:02 2016 -0800

    Add commented-out #define that the docs claimed was there.

[33mcommit 6ebd15852852600c9646e20014b2a9df17cfa484[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Dec 22 13:05:50 2016 -0800

    10GB of scenes now

[33mcommit 6a9eec894534507db6fff6d052c7bbdb541421b1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Dec 22 13:03:29 2016 -0800

    Add "samplepixelcenter" option to HaltonSampler.
    
    This forces all image samples to be at the center of the pixel. (Not so good
    for anti-aliasing, but useful for some applications.)

[33mcommit 3abd7bc74ce9907602fbc09624445a8c8e7f5d5e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Dec 22 12:45:03 2016 -0800

    Fix PBRT_FLOAT_AS_DOUBLE build.
    
    (And also a test that was failing.)

[33mcommit 1f1ea92569df3b7d732f21de4b13594bab18d8f0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Dec 22 12:36:30 2016 -0800

    Make Bounds[23] constructors that take a single point explicit.

[33mcommit e93066e318585b9faf0aedd2b22e8ecf1f5ce576[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Dec 22 12:36:14 2016 -0800

    Add CHECK before resetting profiler state after rendering.

[33mcommit bf8859ddc71cf0ed1dfaf228717549b268375343[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Dec 22 12:35:52 2016 -0800

    Change vector "size() == 0" tests to "empty()"

[33mcommit 194cb103f8b47dbea2d17ad268bc6bd99b60322f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Dec 22 12:33:57 2016 -0800

    Fix appveyor links in README.md.
    
    Now, clicking the badge gives the most recent build from master, not
    the most recent build of any kind (which may be a broken one, e.g.
    from a pull request.)

[33mcommit dcd6ec24723b384bb22b49a600fac2118c036d00[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Dec 7 17:53:36 2016 -0800

    Fix normal calculation in Triangle::Sample().
    
    We used to interpolate a shading normal and return that, which doesn't seem
    like the right thing to do. As in intersect, we do use the shading normal
    to orient the geometric normal, if shading normals are present.
    
    Also made the handling of 'reverse orientation' and 'transform swaps
    handedness' consistent with elsewhere: only flip the normal for these if
    there is no shading normal (and check the transform handedness stuff, which
    wasn't being done before.)
    
    Checked a number of pbrt-v3-scenes: no meaningful difference in san miguel,
    measure one, contemporary bathroom, barcelona pavillion (night), or crown,
    all of which have triangle area lights with per-vertex surface normals.
    bathroom does change, due to the expectation that 'reverse orientation'
    applied even if there were per-vertex normals (now no longer the case). A
    fix for this will be pushed to the scenes distribution.

[33mcommit dc2fd0b4898bc1bfa49f1d6e7f4ab10fa1a8d835[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Dec 7 09:19:54 2016 -0800

    Improve consistency of parameter names.
    
    numlevels -> levels
    nsamples -> samples
    Which better matches parameter naming elsewhere.
    
    Old names are still supported for backwards compatibility.

[33mcommit 6663b4cd4cb242ef8b923d99a6cb0b27b2fb0f37[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Dec 6 20:34:53 2016 -0800

    Reduce iteration count in reintersection tests.
    
    (They were taking too long.)

[33mcommit bf038a49dbaf7f40dff5b4c7c1c3e58ca68293d2[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Dec 6 19:27:33 2016 -0800

    Add Shape::SolidAngle() method.
    
    The default implementation uses Monte Carlo integration. Sphere has a
    specialization (as does Triangle from when just it had this method.)

[33mcommit 430a1e60a6864b5ed5c87d846b865a04c3cef48f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Dec 6 19:04:48 2016 -0800

    Fix bug in Sphere::Sample().
    
    Because the sampling coordinate system is in world space, the surface
    normal computed by SphericalDirection() is itself already in world
    space. However, we were treating it as being in object space, which in turn
    led to errors if the sphere's object-to-world transformation involved
    anything more than translations.
    
    The following scene illustrates the bug: the rotation applied to the sphere
    should have no effect on the final image, since the sphere starts out at
    the origin, but without this bug fix, the image changes substantially if
    it's there.
    
    WorldBegin
    
    AttributeBegin
      Translate 0 2 0
      Rotate 180 1 0 0
      AreaLightSource "diffuse" "color L" [40 40 40]
      Shape "sphere" "float radius" .5
    AttributeEnd
    
    Material "matte"
    Shape "trianglemesh" "point P" [-5 -1 0  5 -1 0   0 -1 5]
      "integer indices" [0 1 2]
    
    WorldEnd

[33mcommit bbf70b6ad5e877fabf6a4c5d7889a47a47dd9bb4[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Dec 6 18:57:22 2016 -0800

    Add Russian roulette to GridDensityMedium::Tr().
    
    When the transmittance gets low, we start to randomly terminate the
    transmittance computation. Speeds up rendering of the smoke/sphere scenes
    by roughly 10% and reduces the average number of steps through the grid
    from ~26 to ~13 for those scenes.

[33mcommit 3172b931e86179e41aea5add1d231ebbb4856668[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Dec 5 09:24:41 2016 -0800

    Standardize on "eta" for specifying IOR in materials.
    
    Some have been using "index" and others "eta". Now all support "eta", which
    is also consistent with the pbrt-v3 file format documentation. "index" is
    still supported for backwards compatibility.

[33mcommit 615b134746aff3fa35f8f861affe5200c2f849a7[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Dec 5 09:17:52 2016 -0800

    Factor out radiance scaling due to transmission when applying Russian roulette.
    
    When rays from the camera are refracted to different media, the radiance
    they carry is scaled depending on the relative indices of refraction. It's
    worthwhile to apply Russian roulette without including this scaling, since
    it saves us from terminating rays that are actually about to refract out of
    a medium and have the effect of radiance scaling cancelled out.
    
    Test scene that shows the difference:
    
    Film "image" "integer xresolution" 400 "integer yresolution" 400
    
    Sampler "halton" "integer pixelsamples" 1
    Integrator "path" "float rrthreshold" .8 "integer maxdepth" 7
    
    LookAt 0 0 -3   0 0 0   0 1 0
    Camera "perspective"
    
    WorldBegin
    
    LightSource "spot" "rgb I" [1000 1000 1000] "point from" [0 15 0] "point
    to" [0 0 5]
    
    AttributeBegin
    Material "uber" "rgb Kd" [ 0 0 0] "rgb Ks" [ 0 0 0 ] "float index" 1
      "rgb Kt" [0 0 0 ] "rgb opacity" [.00001 .00001 .00001]
    Shape "trianglemesh" "point P" [-9 -9 -2.5   9 -9 -2.5    0 9 -2.5 ]
      "integer indices" [0 1 2]
    Shape "trianglemesh" "point P" [-9 -9 -2.25   9 -9 -2.25    0 9 -2.25 ]
      "integer indices" [0 1 2]
    Shape "trianglemesh" "point P" [-9 -9 -2   9 -9 -2    0 9 -2 ]
      "integer indices" [0 1 2]
    Shape "trianglemesh" "point P" [-9 -9 -1.5   9 -9 -1.5    0 9 -1.5 ]
      "integer indices" [0 1 2]
    AttributeEnd
    
    AttributeBegin
    Material "glass"
    Shape "sphere"
    AttributeEnd
    
    Material "matte" "rgb Kd" [.4 .4 .8 ]
    Shape "trianglemesh" "point P" [-40 -40 5   40 -40 5    0 40 5 ]
      "integer indices" [0 1 2]
    
    WorldEnd

[33mcommit 95de3e2061ea22321f6e0a9b51a0e0f5477ac0e0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Dec 4 15:48:32 2016 -0800

    Fix default for KdSubsurfaceMaterial "mfp" parameter.

[33mcommit 78d2fa194c268b9b774cc413422f5d8d4367be6e[m
Merge: 371c518 85a1a0b
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Dec 4 09:40:25 2016 -0800

    Merge pull request #99 from syoyo/bswap-fix
    
    `__builtin_bswap32()' may not be available on non-MSCV compiler, thus‚Ä¶

[33mcommit 371c518cce1de303472184588357e2fca08129ae[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Dec 4 09:35:43 2016 -0800

    Add simple test for FourierBSDF

[33mcommit 7b7bee5a3fe91e6ecb31a17b4686fbe2c0e612f1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Dec 4 08:58:36 2016 -0800

    Work around MSVC2013 test failure.

[33mcommit 85a1a0bc16993b6c45c5ceaa75683466f429b880[m
Author: Syoyo Fujita <syoyo@lighttransport.com>
Date:   Sun Dec 4 17:09:04 2016 +0900

    `__builtin_bswap32()' may not be available on non-MSCV compiler, thus use our own byteswap function.

[33mcommit b068e127e337fa198ae2033208ca99b601bb75db[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Dec 3 15:34:16 2016 -0800

    Add blackbody tests

[33mcommit 3eefc0bcfcbf209914eddc7410df2e2da0be6b57[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Dec 3 13:44:49 2016 -0800

    Add ResampleLinearSpectrum() function.
    
    (Implemented during digging into issue #55, though as explained there,
    not currently used. We‚Äôll keep it around for pbrt-v4, since it‚Äôs
    written and tested.)

[33mcommit f6f7a235e6b93c371653c96fed94657134e439fa[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 30 22:03:14 2016 -0800

    Fix Linux/Windows builds.
    
    An inadvertent #include in the pbrt namespace was not a good thing.

[33mcommit df8c1089524ebe1a4772b13b7e87d54e0aa58400[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Nov 29 08:42:37 2016 -0800

    small PFM cleanups

[33mcommit 7095acfd8331cdefb03fe0bcae32c2fc9bd95980[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 23 11:07:27 2016 -0800

    Track memory allocated for volume grids.

[33mcommit 59142c292b76e2c578fe0e96e527bc2d9ae79f37[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 23 11:07:11 2016 -0800

    Add profiling enumerant values for volumetric stuff (and use them).

[33mcommit b47ed0d334cde4c475def0044c974b7db173ff99[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 23 11:04:52 2016 -0800

    Add namespace pbrt.

[33mcommit 001beddbddf76db16cd230ba05e76184024f0c9d[m
Merge: e574111 bf909f6
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Nov 22 09:48:28 2016 -0800

    Merge pull request #97 from mmp/windows
    
    Improvements to Windows build.

[33mcommit bf909f66219d890aae709771cc26e45b22a33623[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Nov 22 08:56:53 2016 -0800

    Improvements to Windows build.
    
    Add the missing zlibstatic dependency.
    Remove hack from appveyor.yml that explicitly built zlib first.
    May fix issue #89?

[33mcommit e5741113389de6ef932c59319c952c76370fcd56[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Nov 19 11:21:57 2016 -0800

    Improve sampler-based profiling coverage.
    
    Specifically, for BDPT (and by extension, MLT), and in where the samplers
    spend their time.

[33mcommit 6a590d5717cb8a7525b9cf8a8753acad5cf0bb0b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Nov 19 09:16:49 2016 -0800

    Use constexpr for a few more constants.
    
    Issue #95.

[33mcommit afbf028c6c522c936d49cd25c48788f1e4268667[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Nov 19 08:24:14 2016 -0800

    Reduce du/dv shifts in Bump() when no differentials are available.
    
    Light paths in BDPT don‚Äôt have ray differentials; in turn, when computing
    bump map surface normals, we would filter over too large an area,
    which in turn gave results that were quite different than were
    computed for camera paths. When visible points on the light path
    were then splatted into the film, we‚Äôd see artifacts.
    
    Significantly reducing the ad-hoc filter region used for light paths
    helps a lot, though it would be nice to have a more robust solution
    here..
    
    Issue #87.

[33mcommit 117ce23a83fd515ed6c28f645c1fd65726749d04[m
Merge: 19f99a7 fff79b0
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Nov 17 08:03:28 2016 -0800

    Merge pull request #94 from wjakob/master
    
    Account for adjoint BSDF when evaluating Vertex::f (fixes #73, #87)

[33mcommit 19f99a77d8ca90f191130d817941b6a7a39a5b8e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Nov 17 08:01:50 2016 -0800

    Fix edge case in CorrectShadingNormal().

[33mcommit fff79b0e9eed9d9c9999cf305dfc8c0b36ade4ad[m
Author: Wenzel Jakob <wenzel.jakob@epfl.ch>
Date:   Wed Nov 16 21:45:37 2016 +0100

    account for adjoint BSDF when evaluating Vertex::f()

[33mcommit 928714107f0e8450056867f7f5d44aa72d10ffc8[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Nov 15 09:25:27 2016 -0800

    Add more logging to the BDPT integrator.

[33mcommit 8b13ef17a230824dde86fc56d0fc7aed01494779[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 9 16:45:35 2016 -0800

    Small light sampling improvements.
    
    Always use UniformLightDistribution if there‚Äôs just one light.
    Improved statistics.
    Change a NumSystemCores() call to MaxThreadIndex()

[33mcommit 1343adc2a6721968def4c93e4a6d086a91e489a0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 9 16:21:24 2016 -0800

    Fix a degenerate vector normalization case in Triangle::SolidAngle().

[33mcommit 8ee2ff181aeeee18867e14e9dd89596b541242e4[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 9 08:27:38 2016 -0800

    Fix inadvertent race condition in ProgressReporter.
    
    It‚Äôs important to make a copy of the shared_ptr for the Barrier rather
    than pass it by reference to the lambda that launches the thread.
    Otherwise, it was possible that the worker thread could access the
    Barrier while it was in the process of being destroyed.

[33mcommit de96bba2bba26db2005897d963ff1147df8c718a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 9 08:05:24 2016 -0800

    Fix bug in SeparableBSSRDF::Sample_Sp().
    
    In rare cases, it would compute a zero value for the |l| variable,
    which in turn led to pTarget being equal to the intersection point,
    which in turn led to a ray with a (0,0,0) direction vector, which
    in turn led to NaN values being computed in Triangle::Intersect().
    (It‚Äôs surprising that it got to Triangle::Intersect() in the first
    place with such a ray.)
    
    Fixes issue #93.

[33mcommit f97cc1ee61907aaf02e91d65edfa71bc0e1fbb4b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 9 08:00:31 2016 -0800

    Actually pass light sampling strategy to PathIntegrator constructor.

[33mcommit cbc79ed642100f8463e644c893fe59fd0178a799[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 9 08:00:13 2016 -0800

    Add output PDF value parameter to Shape::Sample() methods.
    
    This saves us from needing to call the PDF() method immediately after
    sampling. (Which was wasteful because it goes and calls the Shape
    Intersect() method, even though in this common case we know that we
    already have a point on the surface.)
    
    Speedups:
    Crown: 3%
    Barcelona pavilion: 15%
    Measure one frame 25: 27%

[33mcommit c24357602540f6c0b1d947cd32448bf72d7bb354[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Nov 6 15:20:31 2016 -0800

    Remove STAT_TIMER support.
    
    This is subsumed by the sampling-based profiling system; better to
    unify and have everything reported there.
    
    Switched over to the profiling system in the few places using STAT_TIMER.

[33mcommit 7a0f1961112d597dce18ebbe4dee855de4af7383[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Nov 6 15:18:37 2016 -0800

    Report wallclock time with percentages from profiling system.

[33mcommit 1ec79547f7591af56d1fbdd43a0ba813b645da82[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Nov 6 15:07:17 2016 -0800

    Move #include from .h to .cpp file.

[33mcommit 74b1b9e40afbe578040555d58f991be802e2af11[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Nov 6 15:07:02 2016 -0800

    Use PBRT_L1_CACHE_LINE_SIZE for alignment of MemoryArena
    
    Also, move PBRT_L1_CACHE_LINE_SIZE #define from pbrt.h to port.h
    Should finish up issue #86.

[33mcommit 1f879fe533831a049dd0c2233e734ac1883aa5d8[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Nov 5 13:15:31 2016 -0700

    Report flattened profiling results ordered by time taken.
    
    (Also ran stats.cpp through clang-format.)

[33mcommit 107b43840bc13cee1296e91c6c4924de97faff42[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Nov 5 12:40:33 2016 -0700

    Increase error tolerance in Triangle.SolidAngle test.
    
    The MSVC2013 build fails in one instance with a slightly too high error
    with the original threshold.

[33mcommit 00b7df13fa5378661055bbfdbaceb8ac167e764c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Nov 4 17:49:40 2016 -0700

    Move light sampling Prof enumerant values earlier in the enum list.
    
    Some of the Light::Sample_* methods call shape intersection methods; this
    way, the correct hierarchy is reported in the profiling stats.

[33mcommit 2ffcf2291c0965a539c3fa37e23e23d5cb690f37[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Nov 4 17:49:21 2016 -0700

    Add Triangle::SolidAngle() method.

[33mcommit 3d3925644955c6130da4fd9bb9fd456c6e7dfd41[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Nov 4 17:47:58 2016 -0700

    Add function to compute minimum distance from a point to a Bounds3f.
    
    (Squared distance, too.)

[33mcommit 158e74928b9eb6809ea10a77ac222af3e247db28[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 29 15:15:57 2016 -0700

    Remove ProfilePhase CHECKs.
    
    For unit tests, we end up running ProfilePhase constructors/destructors
    even though the stats system isn't running.

[33mcommit a01343ad840b31f0a54e4c5f43450b5d6209ec4c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 29 15:04:22 2016 -0700

    Another build fix.
    
    g++ doesn't like the Log2Int(size_t) overload either. Just removing it
    completely.

[33mcommit 0d089105bae6a5c815ccd1c3892315a5b696ce50[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 29 14:55:26 2016 -0700

    Attempt to fix MSVC build.
    
    (It seems that size_t isn't its own type.)

[33mcommit fcdd7716e31a045fcc6e92fa7885c8859f15ecab[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 29 14:42:40 2016 -0700

    Fix a race condition between the profiler and ProgressReporter.

[33mcommit 62e4591f46978d1ca71a771e512701919928d8e0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 29 14:41:44 2016 -0700

    Fix crash due to normalize of (0,0,0) vector.
    
    In Sphere::Sample(), don‚Äôt normalize the vector from the reference point
    to the sphere center until after checking for whether the point is
    inside the sphere.
    
    The SpatialLightDistribution was creating Interactions at the origin
    (under a certain set of circumstances) in a scene with a sphere
    centered at the origin, which led to an assertion failure.

[33mcommit bc50f47bec6d1e07c46150981279867eca6dd778[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Oct 28 13:07:05 2016 -0700

    Add many new profiling categories (now that the prof system is more scalable.)

[33mcommit efc29dddc5c63c801f1d6cf16b655d74fcf64f04[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Oct 28 08:45:40 2016 -0700

    Clear out stats at frame end.
    
    This way, if multiple images are rendered ("pbrt foo.pbrt bar.pbrt"), then
    the reported stats for each scene don't include stuff from previous
    renders.

[33mcommit 609c1fdda9807ade912715409372f576a8be500e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Oct 28 08:32:04 2016 -0700

    Use a hash table for the profiling system.
    
    Before, we allocated a fixed-size array of size 2^(num prof categories)
    where very few of the entries were actually used. Now, we use a small
    hash table, which will allow scaling up to more categories, which
    should be useful.
    
    Performance is not noticeably changed from the old approach.

[33mcommit 09a17f08520007577d84686f1ca80255f12c41f0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Oct 28 08:30:38 2016 -0700

    Add 64-bit variants of Log2Int().

[33mcommit 6e4ab042ad256769faf660ab4e5b360b153bba35[m
Merge: 003fd65 b603f7c
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 26 11:17:50 2016 -0700

    Merge pull request #90 from syoyo/cyhair
    
    CyHair to pbrt(Curves) converter.

[33mcommit b603f7c2df4e722088b0b271fbe6f7d4f312e4bd[m
Author: Syoyo Fujita <syoyo@lighttransport.com>
Date:   Thu Oct 27 02:18:46 2016 +0900

    CyHair to pbrt(Curves) converter.

[33mcommit 003fd65af8d371fb5ef05c7799f3caede0ac3515[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 26 06:21:18 2016 -0700

    Fix rare infinite loop bug in SampleFourier().
    
    In very rare circumstances, the while(true) loop in that function would
    continue forever. What was happening was that we'd get stuck on a
    particular bracketing interval [a,b], wherein loop iterations would
    alternately just so happen to compute phi=a and then phi=b.  In turn, no
    progress would be made and the loop would continue forever.
    
    This is easily fixed by choosing the bisection step when phi exactly equals
    one of the endpoints.
    
    (Though this bug hasn't yet been seen in SampleCatmullRom() or
    InvertCatmullRom(), there is similar logic in those functions, so also
    updated the logic there similarly.)

[33mcommit 86d03873ac4100aa2a0e2d8aaf1430635dc33653[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 26 06:32:04 2016 -0700

    Fix rare deadlock in profiling system.
    
    In rare circumstances, where one thread was in the middle of allocating
    memory when it received the timer signal for the profiling system, and if
    the thread accessed a thread-local variable for the first time in the
    signal handler, it also would try to dynamically allocate memory, which
    could lead to a deadlock in malloc().
    
    Now, things are organized so that the thread-local variable, ProfilerState,
    that is needed in the signal handler, is initialized in all threads before
    the profiling system starts up.
    
    Also cleaned up a bit how worker threads are launched and how they merge
    their per-thread stats to the stats system.
    
    Issue #85.

[33mcommit 69b6e643d91fdc8c1ba52a6f7c89102410905b6f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 25 09:35:21 2016 -0700

    Remove some unnecessary #includes of parallel.h

[33mcommit 3f33e1bb3049b4032c0e406ea19afb179967896b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 22 12:55:52 2016 -0700

    Hair cleanups.
    
    Improved ToString() method.
    Removed old debugging code.

[33mcommit 13c32d15cf0cfa4238d2248a0fcb3e48e97c3d11[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 22 12:40:23 2016 -0700

    Make sure pbrt.h isn't #included before gtest.h in tests.
    
    (This leads to an annoying/obscure Windows build breakage.)

[33mcommit 201759b12ed6c5e719058ab8e3aa47baa2ee5879[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 22 12:37:51 2016 -0700

    Various small stats improvements.
    
    Count number of materials created.
    Improve wording in texture map filtering stats.
    For memory stats, print kB or GiB, if those are better units to use.
    Track how much memory is allocated for Film pixel data.

[33mcommit 203ba0cb02ecfdd6eaf48cbdf1f7ac4ee6bc4b53[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Oct 20 20:14:58 2016 -0700

    Another try at fixing the MSVC build.
    
    The actual issue seems to be #includeing pbrt.h before gtest.h, since on
    Windows, pbrt.h #defines Infinity, and gtest.h has a method named Infinity().
    
    This reverts commit 094b1572f8a598ae2f024079fd67e8e56d48999a.

[33mcommit 094b1572f8a598ae2f024079fd67e8e56d48999a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 19 19:34:33 2016 -0700

    Another MSVC fix (attempted).

[33mcommit a7a3c773e5279a6b226966fb3f999af959b0b17d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 19 18:26:06 2016 -0700

    Add inline qualifiers to attempt to fix MSVC build

[33mcommit 13c9e93fc3c38209fa6aa1c8a66b7f419522b705[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 19 18:12:23 2016 -0700

    Attempt to fix MSVC build.
    
    (Missing #include)

[33mcommit e1c156f55383248c2857400dda4c9dbf59970d40[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 19 18:10:57 2016 -0700

    Remove Hair/Values test.
    
    This was useful for development, but isn't suitable for general testing,
    since it ends up being too compiler-specific.

[33mcommit 905ce07e83bd68a003094314c58f1408c4840bf8[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 19 15:39:00 2016 -0700

    Add a hair scattering model.
    
    This is basically an implementation of Chiang et al's model from the
    Eurographics 2016 paper "A Practical and Controllable Hair and Fur Model
    for Production Path Tracing" (http://benedikt-bitterli.me/pchfm/).
    
    A writeup describing the implementation is available from
    http://pbrt.org/hair.pdf.

[33mcommit 9c00a2fccc20a9025688d11dc2d4c291d858494d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Oct 16 14:36:26 2016 -0700

    README.md fixes

[33mcommit aaba1fa8c5eeeedb3aa38f90ac72362b2d513db5[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Oct 16 14:34:53 2016 -0700

    Remove user's guide (it now lives at pbrt.org/users-guide.html.)
    
    Added more info about building the system to the top-level README.md.

[33mcommit ac06a0d17937f26baf261b6f96cad5654dd514e1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Oct 13 18:57:09 2016 -0700

    Fix bug in Bounds2i iterators.
    
    For degenerate bounds, they would end up going on forever (or at least a
    very long time, visiting all sorts of points that weren't inside the
    bounds).
    
    Added unit tests to test both their regular operation as well as degenerate
    cases.

[33mcommit 7011299df09a957226e1d927bda2ce034da7fd3a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Oct 13 18:36:54 2016 -0700

    Add implementation of Film::Clear(), which was declared but never defined.

[33mcommit 629bd99836afbb3d4264f1e10896018d0bfd85b5[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Oct 13 18:34:40 2016 -0700

    Clean up LightDistribution stuff in BDPT integrator.
    
    Update some stale comments.
    
    Always use the light distribution the user selected (only power and uniform
    really make sense).

[33mcommit 1973e04a73d89761b0d144bd9e1e0cc2128029f2[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Oct 6 08:29:11 2016 -0700

    Improve FourierBSDFTable initialization.
    
    By setting nChannels to zero at the start and in failure cases, we avoid an
    uninitialized memory read (and potentially, a crash), when the BSDF file
    can't be read.

[33mcommit 812fb79fac74a76c32c1b893d7e5f772c7c23fc1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Oct 6 08:09:13 2016 -0700

    Make LoopSubdivide() function local to loopsubdiv.cpp

[33mcommit 022b1ff2145866b8a84635a6bfba0f7b8c80bd87[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Oct 6 07:11:01 2016 -0700

    Reduce ProgressReporter update frequency after 15m.
    
    This reduces the size of log files that include progress output for long
    renders.

[33mcommit aff14c8b2a96f84333ce0a5530c8212a3745d983[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Oct 6 07:08:35 2016 -0700

    Improve handling of unknown terminal width in ProgressReporter.
    
    Go back to assuming 80 columns when we can't figure out the terminal width
    (e.g. when piping output to a file.) This fixes some super long/useless
    progress bars we were getting in that case.

[33mcommit 2f4bbeebf9d128e042a13d5b849f047888198e40[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Oct 6 07:06:46 2016 -0700

    Initialize logging in imgtool and pbrt_test
    
    This supresses a warning at program start and also gets rid ofthe annoying
    INFO logging messages.

[33mcommit 958520c2ab56ce3d3a3e341e5c1090ed40c87ad6[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Sep 25 14:02:13 2016 -0700

    Add TextureParams::GetSpectrumTextureOrNull method

[33mcommit a236b5c5d49493952239b6e3a51877ccf639bb15[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Sep 25 13:55:07 2016 -0700

    Improve Russian roulette probability in Path/VolPath integrators.
    
    Base survival on the maximum color component value rather than on
    luminance. This helps with some moderate noise spikes that were appearing
    when rendering reddish hair, where the red channel of beta would grow
    noticeably > 1 even though the luminance was well below 1.

[33mcommit 7f28f0a61cb03efc8a479948a9a0a610d89a6a9c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Sep 25 13:51:14 2016 -0700

    Add some logging for SpatialLightDistribution

[33mcommit c4715e8d7ce50561bf3d9c92d38c0993509d68ac[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Sep 18 16:27:32 2016 -0700

    Edit/shorten README.md

[33mcommit 9d06eb75805570e6ca30ac24819eb7c723817e9d[m
Merge: 8f6e471 f825747
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Sep 18 16:23:25 2016 -0700

    Merge pull request #88 from mmp/glog
    
    Incorporate Google logging framework.

[33mcommit f82574765b27620521ff922a89bb82e84726e879[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Sep 18 16:22:54 2016 -0700

    Added initial users guide

[33mcommit ad5177967152c15e1fb9e9d4c4f9d1df7916ba55[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 13 09:33:39 2016 -0700

    Try again at downloading cmake for travis-ci linux build

[33mcommit 4fa924404d19d1d9ab9a6417e363e687638de1ed[m
Merge: b1c2106 8f6e471
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 13 09:25:16 2016 -0700

    Merge branch 'master' into glog

[33mcommit 8f6e471ba0af5288d857bba2cf883cd508618d1b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 13 09:24:21 2016 -0700

    Add check before Normalize() call in DiffuseAreaLight.
    
    We would end up trying to normalize a degenerate vector in rare cases.

[33mcommit b1c2106fd446bc687999d6272a8faaab68895dac[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 13 09:15:16 2016 -0700

    Disable shared libs for glog build.
    
    Attempt to make Windows build happy.

[33mcommit f21d24d33f67b8b2fd27a2754011cc0dca45373e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 13 08:46:03 2016 -0700

    Update .travis.yml to install modern version of cmake.
    
    (glog insists on version 3)

[33mcommit 96caf1d8fe84f3cd8538f0b9b0d2e5e22ff67a18[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 13 08:38:24 2016 -0700

    Actually disable search for gflags in CMakeLists.txt

[33mcommit 514194f8b2d6b549c22c1c7e886dfc46f92bcad6[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 13 08:03:16 2016 -0700

    Incorporate Google logging framework.
    
    Assert() calls are replaced with corresponding CHECK_*s, which give better
    messages (and print stack traces).
    
    Added some initial support for logging rendering operations, which has been
    useful for chasing down a few bugs already.

[33mcommit e78acc58dd971b94762017f871a414d7474c0083[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 13 08:08:05 2016 -0700

    Fix rare NaN case related to Curve coordinate system computation

[33mcommit 9cc62b62846d6aefaba27f19643f0a0efd6914c3[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Sep 8 18:48:52 2016 -0700

    Increase default curve "splitdepth" to 3.
    
    Though this doubles memory usage, it gives a 2.60x speedup for the
    hair-curl scene.  (Net speedup with this and preceeding series of
    optimizations: 3.97x.)

[33mcommit 4569569d541caac7ba52f6ecbff041f5135fc050[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Sep 8 18:32:17 2016 -0700

    Improve bounds overlap tests in Curve::Intersect().
    
    Change the logic so that we check bounds before calling
    recursiveIntersct(), rather than after. This lets us save a bunch of
    useless work when there is no overlap.
    
    Speedup of roughly 10% on hair-curl scene.

[33mcommit 8a42fda0d6d5f1b55612a53bfdab72ab1859c3b3[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Sep 8 18:18:52 2016 -0700

    Improve performance of base-4 logarithm computation in Curve::Intersect().
    
    Since we only need the integer log, compute it based on a fast algorithm
    for base-2. We get slightly different rounding behavior since the base-2
    log is rounded before we divide by 2 to compute the base-4 log, but there
    seems to be no visible effect on images.
    
    9% speedup on hair-curl test scene.

[33mcommit 449497bd4f613f573e3c53b891b04b42ca291244[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Sep 8 18:13:56 2016 -0700

    Be careful about ray coordinate system orientation in Curve::Intersect().
    
    Aligning it with the curve gives us tighter bounding boxes and lets us exit
    out of recursiveIntersect() sooner. ~12% speedup for hair-curl test scene.

[33mcommit 3812ac91a0ab48be2e1698e240c9d2e4c16128f1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Sep 8 18:01:55 2016 -0700

    Improve performance of default Shape::IntersectP() method.
    
    (This is the variant that forwards the intersection test on to
    Intersect().)
    
    Passing nullptr for tMax and the SurfaceInteraction lets Curve::Intersect()
    skip some work for shadow rays. Roughly 9% speedup for hair-curl test
    scene.

[33mcommit be08a68dbc1a9f67d39db6307e447139077be09e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Sep 8 17:48:51 2016 -0700

    Fix bug in Curve::Intersect().
    
    We actually want to recursively process both sub-curves, even if we find an
    intersection with the first one, since there may be a closer second hit.

[33mcommit d8e6cdf9fcb9399c7984fc43b08773cd1990651d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Sep 7 07:40:24 2016 -0700

    Improve compile-time detection of host endianness.
    
    Should fix issue #86.

[33mcommit 89da77c362435aeebf2acccb06369917a8d2ec9a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Sep 3 08:42:43 2016 -0700

    Clean up handling of per-thread light distribution caches.
    
    Rather than using a global thread local variable, keep a vector in
    the main SpatialLightDistribution class that is accessed using
    ThreadIndex. Not only does this clean up the implementation (and
    allow multiple SpatialLightDistributions to exist), it seems to clear
    up intermittent crashes due to freeing bad memory in the
    SpatialLightDistribution destructor.

[33mcommit bc7f3cabe44a5d06cea2d7c654757fabc4eb974f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Aug 24 08:15:29 2016 -0700

    Fix MSVC2013 build

[33mcommit eb35f51611d5dce95550fc902be1d39d2f36b122[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Aug 22 08:27:55 2016 -0700

    constexpr -> PBRT_CONSTEXPR
    
    (Attempt to fix MSVC build.)

[33mcommit 3cdde9511d9e9d78728cc01d66e7e8e40745edc1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Aug 22 08:21:19 2016 -0700

    Fix test failures

[33mcommit 919291827f2ef3b8af3fc38acc36769f5808b0b0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Aug 21 18:14:51 2016 -0700

    Switch default BDPT light sampling method to be by emitted power.
    
    Upon further consdieration, the "spatial" approach is a bad idea for BDPT
    since (for example) a spotlight that doesn't directly illuminate the first
    visible point would be given a very low sampling probability, which is a
    bad idea if it makes a large contribution to indirect lighting at the
    point.

[33mcommit 195133166dd1962de4828ffe9a35cc6153ebf3bd[m
Merge: 5c67509 860fd2d
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Aug 22 07:32:18 2016 -0700

    Merge pull request #84 from henrikdahlberg/patch-1
    
    Fixed typo, Expencted -> Expected

[33mcommit 860fd2d72bf67662e661461df1e74798f01e148e[m
Author: Henrik Dahlberg <hdahlb@kth.se>
Date:   Mon Aug 22 16:25:49 2016 +0200

    Fixed typo, Expencted -> Expected

[33mcommit 5c67509248aa1675a50499a6ed3ecce904dad103[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Aug 21 17:05:51 2016 -0700

    Add better support for scenes with many light sources.
    
    A new LightDistribution base class encapsulates multiple strategies for
    distributing samples over light sources. Implementations include uniform
    (as path and volpath used before), sampling by total emitted power (as
    BDPT did before), and a new approach that computes spatially-varying
    sampling distributions based on an estimate of how much each light
    illuminates regions of space.
    
    The new approach seems to be a win for almost all scenes, and is
    basically the only way to render the measure-one scenes in any sort
    of reasonable amount of time.

[33mcommit 67b68dacc26453dc591aecf34fc98fa99fe9fd21[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Aug 21 09:56:23 2016 -0700

    Update README.md for multiple branches

[33mcommit 757de9ce9f07ac142a685c126b0836dd6854ad81[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Aug 17 07:46:24 2016 -0700

    Fix profiler segfault fix.
    
    Actually, using a unique_ptr at all is a bad idea (with multiple
    threads). The issue is that even if we reset the pointer at shutdown time,
    there may be a race where another thread has read its value and is
    modifying its memory while the main thread is freeing it.
    
    Therefore, allocate profileSamples at startup time, but don't worry about
    freeing it. This is just a one-time memory leak (and not growing), so isn't
    really a problem.
    
    Issue #83.

[33mcommit f8024ffb6006d80bb4a8d9effd2359b367afb067[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Aug 17 07:41:37 2016 -0700

    More carefully shut down the profiling system when exiting.
    
    This should fix issue #83 (occasional segfaults at program exit).

[33mcommit ed74ec45cd1b8d104420c9ef085b1b4de4bc0af2[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Aug 13 12:06:09 2016 -0700

    Add --preservecolors option to imgtool convert

[33mcommit 9bde90865ef32880b04f2d30e6cdf2b33a47c664[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Aug 13 11:48:32 2016 -0700

    Only warn about non-uniform light scales for non-triangle area lights.
    
    (They're fine for everything else.)

[33mcommit f5eaf7a3ed068b5c5ef99923c2f00da9dff8ce50[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Aug 6 16:07:40 2016 -0700

    BDPT: cache mapping from Light * to index in Scene::lights
    
    This lets us remove a few linear searches over lights that turned out
    to be a really bad idea when there are 1000+s of light sources in the
    scene.

[33mcommit de2bbdefe54ab20090982dd09c70ec2d51e68051[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Aug 6 16:03:35 2016 -0700

    Improve handling of difficult triangles.
    
    Be slightly more conservative in the test for degenerate uv coordinates
    to catch cases where the old test would pass but we‚Äôd still end up with
    infinite values by the time we were done computing dpdu and dpdv.
    
    Add a check for the case where dpdu cross dpdv is degenerate.
    
    Removed the load-time check for degenerate uv coordinates since the
    intersection code should be sufficiently robust to this now.

[33mcommit c15c460a39e03d1cf3e04fdc8d9f65e4a2ce19e1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Aug 5 07:30:33 2016 -0700

    Fix curve refinement level calculation.
    
    Issue #76.

[33mcommit 7db588c6f33a361a47f4fb35b1c8088c96effae5[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Aug 5 07:27:54 2016 -0700

    Added twosided option to DiffuseAreaLight

[33mcommit f6eb1f27f0e7f0c5a05f287ac3fd0caf5de5e218[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Aug 5 07:17:42 2016 -0700

    Store a second vector of infinite lights separately in Scene
    
    This is helpful in scenes with many (e.g. 1000s) of light sources, for
    when we need to add radiance for escaped rays.

[33mcommit 28f40aee348270a5c010b863e724950bf00a4527[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Aug 4 21:23:42 2016 -0700

    Add stats on number of curves created

[33mcommit 9ba6a90c1b80bec63d2e216a4b20b043dd165758[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Aug 2 20:50:38 2016 -0700

    Fix undefined behavior in obj2pbrt.
    
    Issue #80.

[33mcommit 67ad5e4c39e854527767504779e8fb341d8d3e24[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Aug 2 19:35:22 2016 -0700

    Use -std=g++11 for g++ builds.
    
    It seems that as of g++ 6.1.1, hex float constants aren't supported without
    this flag.
    
    Issue #77.

[33mcommit c5ffb9eb85adfce51b28ddc0110d4c1fdf8fb099[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Aug 2 19:12:17 2016 -0700

    Don't unnecessarily reload and reallocate storage for Fourier BSDFs.
    
    Maintain a map from filenames to FourierBSDFTable *s to avoid this. (In
    paraticular, we'd run out of memory with if a Fourier material was used
    with the teapot model, since each triangle is specified individually.
    
    Fixes issue #79.

[33mcommit 411a5b633ac3c1e9103bf557eb69ff31909e9235[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Aug 2 19:02:38 2016 -0700

    Handle missing materials in obj2pbrt.
    
    Add a semi-helpful comment in the generated pbrt file (instead of crashing)
    if a material definition isn't available.
    
    Fix via stephenlombardi@, issue #80.

[33mcommit 40f198f6381189e5fc85b63819b38fd4ee3fefb7[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Aug 1 20:16:10 2016 -0700

    Increase default SPPM iterations to 64.
    
    (This is a more likely to be useful default.)

[33mcommit 7b80f38fbef95daffdf79fb763492d2f133117ed[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Aug 1 20:15:17 2016 -0700

    Fix bugs that made it hard to define a "none" NamedMaterial

[33mcommit ab85c8fb5fd4ebe80de1146835a23a1340fdd817[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Aug 1 20:13:55 2016 -0700

    Issue warning if scene has scattering media but integrator doesn't account for it.

[33mcommit 22dac8f3ea0f700e791f47bd6837e2ffa4346ece[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Aug 1 20:12:47 2016 -0700

    Remove unused function.

[33mcommit 1d28c85bfc1425945316f0e87f9fa14ec939b68b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Aug 1 20:12:33 2016 -0700

    Warn if many lights are present with path/volpath integrators.
    
    Because these sample lights uniformly, they can be quite inefficient
    when there are many (e.g. 100s or 1000s of) lights and some emit
    relatively little power.

[33mcommit 4d61bbc0dbef18bd962a1ac90cf8ffe698769855[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jul 31 11:37:48 2016 -0700

    Add counters to track number of lights and area lights created.

[33mcommit dbdcdd1f7944cdebdb907c73c3a16a08698af313[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jul 31 11:37:12 2016 -0700

    MakeNamedMaterial improvements.
    
    Warn if a named material is redefined.
    When doing --cat or --ply, don‚Äôt actually create the material.

[33mcommit 72b915df752ec3bbd1e5c78dc24f0a7b57296300[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jul 31 11:31:41 2016 -0700

    Issue an error if an undefined NamedMaterial is used.

[33mcommit a636c94931793a95c3a6c3fc5d4262d881bb8c2f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jul 31 11:31:00 2016 -0700

    Add rrThreshold parameter to Path and VolPath integrators.
    
    Russian Roulette is only applied if the path contribution's luminance
    is less than the threshold. This setting is useful when rendering
    complex glass objects, for example, as it lets us disable Russian
    roulette and keep going to the maximum path depth, which gets rid of
    fine noise in very complex regions of models.

[33mcommit 9fbb901fafe20b926746eb8134378b09f02c5721[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jul 31 11:26:53 2016 -0700

    Use 8192 as the terminal width if it can‚Äôt be determined.
    
    This is a better default than 80, since the usual case when we can‚Äôt
    determine it is when output is being piped to another process; if that
    process is 'grep', for example, not doing any line wrapping is the
    most useful thing.

[33mcommit 03b64ecacec9c7a0efddb4fac923cabe46820000[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jul 31 11:24:47 2016 -0700

    Don't print the same error message multiple times in a row.

[33mcommit d3181977a6ce2b0855e7a23015f9c9109858cc3d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 27 07:09:20 2016 -0700

    Add missing ScaledBxDF::Pdf() method implementation.
    
    This was a fairly serious bug; ScaledBxDF forwarded Sample_f() requests on
    to the underlying BxDF but used the default BxDF::Pdf() method
    implementation (which assumed uniform sampling over the hemisphere.) In
    turn, we'd see serious noise spikes in scenes that used the MixMaterial,
    especially in the presence of transmission (where ScaledBxDF would return a
    0 PDF for sampling transmitted directions even if the BSDF was non-zero.)
    This bug specifically caused the noise spikes in the "landscape" scene.
    
    Also fixed some Pdf() method declarations to be consistent about wo being
    te first parameter, as they should have been.

[33mcommit e8e16853f139945144fd69aa440b8cd7732da5f9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 26 08:06:41 2016 -0700

    Add --despike option to "imgtool convert"
    
    Optionally replaces isolated spiky pixel values (i.e., fireflies) with the
    median of the 3x3 neighboring pixels.

[33mcommit 87af8dd3c9ab4d840960dbde1aa115708165c98c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 26 07:13:44 2016 -0700

    Exit, rather than waiting for input from stdin, if --help flag is given.

[33mcommit 4d5ad232afd1700959318ac2486e8017c5d3a1e9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jul 25 09:11:10 2016 -0700

    Add missing newlines in imgtool error messages

[33mcommit 52d7d1c14659626ddcf63fc696b5accf00f7aeba[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jul 21 18:08:54 2016 -0700

    Add "maxsampleluminance" option to Film.
    
    Makes it possible to clamp sample values to a user-provided maximum. Useful
    for improving visual results for scenes with really hard-to-sample light
    paths that cause huge noise spikes.

[33mcommit 67f402350db154ab0b4445411cfed9c217151bc0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jul 21 08:26:59 2016 -0700

    One more C99ism in ArHosekSkyModel.c

[33mcommit 5f479d79d068d272102c69bf68f6d8b310457e20[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jul 21 07:40:34 2016 -0700

    Remove C99isms from ArHosekSkyModel.c

[33mcommit fde061bd77826e1e7c3972b42ac6f4541577f455[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jul 21 07:30:27 2016 -0700

    Fix MSVC2013 build

[33mcommit 8b2a50bf19a2deab622bbc05d074ea3d232a944e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jul 21 07:11:04 2016 -0700

    Add "makesky" option to imgtool.
    
    Generates latlong env maps using the Hosek-Wilkie sun/sky model.

[33mcommit 4b3979a2c24958933b4845df0a7c4881d7c06a6a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jul 21 07:10:02 2016 -0700

    Fix bug in sky model.
    
    Solar disk code would return non-zero values outside of the solar disk
    (because the ldCoefficient[0] value is generally non-zero.)

[33mcommit 1f9811c5589b2ed7ffba547e08e5182759623af1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 20 18:53:34 2016 -0700

    Initial commit of Hosek-Wilkie sky model code

[33mcommit 4ec26294ca4966bd23106895530f22663be19333[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 19 20:48:43 2016 -0700

    Fix build for !PBRT_HAVE_HEX_FP_CONSTANTS targets

[33mcommit 98dc654fd0558d1f1f1b2fac228b3e07b892f72d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 19 15:22:00 2016 -0700

    Fix Sobol sampler to not (rarely) generate sample values of 1.

[33mcommit d6c53031c539e3a64e75a0efdf58f8d16c27cbfb[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jul 16 10:09:13 2016 -0700

    Remove unused variable

[33mcommit 316528f63fbc79c83313d8e7a2159b3f18674b64[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jul 14 21:01:53 2016 -0700

    Fix default "pixelbounds".

[33mcommit 4faea77dd41cdbc4b7bd47bc5f744d1d56af68bf[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jul 14 21:01:07 2016 -0700

    Fix subtle bug in FourierBSDF::Sample_f().
    
    Computed wi directions could end up being far from normalized in certain
    circumstances.

[33mcommit ddf3d6dee854787bfe2c5d57d9ca7fa7eab3d60d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 13 20:15:04 2016 -0700

    More README updates

[33mcommit a340c7a6cb4a935aa58628331fe3632881dba714[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 13 18:27:48 2016 -0700

    Update README

[33mcommit 956ed1827dbc535c8b32444b54d63b49dc9ad3c0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 13 18:01:13 2016 -0700

    Improve InfiniteAreaLight::Pdf_Le() fix.

[33mcommit 835cf00cd9b9197a5b10aa57964c8f908eac0d2a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 13 17:57:13 2016 -0700

    Revisit InfiniteAreaLight texel address conventions.
    
    Issue #62. (See discussion there for details / rationale.)

[33mcommit 95d2b1289a07b3a1e0f6eca15d4930f5ca5688d9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 13 17:55:34 2016 -0700

    Fix bug in InfiniteAreaLight::Pdf_Le()
    
    Negative angles returned from atan2() weren‚Äôt being remapped to [0,2pi].
    
    Issue #62.

[33mcommit 25b17c0d6ef0c2e6f552ea43c666b401035b37d7[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 13 17:08:29 2016 -0700

    Various improvements to Cinema4D exporter.
    
    - Only warn about missing textures (but still emit the Texture directive
      for them.) Assume that the user has them / will want to replace them
      with some other texture
    - Allow PNG textures now that we can read them
    - Emit materials into a separate file. Always use NamedMaterials.
      (Both for ease of manual tweaking)
    - Bugfix: don‚Äôt emit meshes without any indices.
    - Don‚Äôt specify the Mitchell filter in the generated pbrt file

[33mcommit 024a60d571362955ffcbd913a9ee1b77f104ac3e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 13 14:35:27 2016 -0700

    Add "assemble" functionality to imgtool.
    
    Takes multiple EXR files from rendering sub-windows via "cropwindow" and
    assembles them into a single image.
    
    (Only EXR is supported. Only it and TGA carry along the information needed
    here, and it's not clear that TGA output is super useful in general.)

[33mcommit d9d43af9989d1ce3a82d4d1ab582f16346b32069[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jul 11 20:17:30 2016 -0700

    Pass comments through with pbrt --cat and --toply

[33mcommit db960957eab9a6d2484e8afb13c1ccdfe204219e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jul 11 20:15:31 2016 -0700

    Fix typo in SobolSampler warning

[33mcommit ecec35b236443e985f14b894214d370f5c4e91c4[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jul 9 19:11:23 2016 -0700

    Add missing header to obj2pbrt.cpp

[33mcommit 5915b1435722e59a5469bb2f6e34e95b378e76c1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jul 9 18:34:58 2016 -0700

    Fix bad #include in obj2pbrt.cpp

[33mcommit 5dde759fb15be871d694def523c30aba0a652161[m
Merge: 86242d4 c8df641
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jul 9 18:30:09 2016 -0700

    Merge branch 'master' of /Users/mmp/Downloads/master.bundle

[33mcommit c8df6413cd0c0267b10dac4736a271298efbc9f5[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jul 8 15:30:21 2016 -0700

    README updates

[33mcommit 93d7b5c0daf67d8863af21dee5d77bc5a3ad474d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jul 8 15:10:05 2016 -0700

    More improvements to command-line argument processing
    
    (Both for pbrt and imgtool).
    
    Allow both single and double dashes before arg names.
    Also allow --arg=value for args that take values.
    Various help text and error checking imporvements.

[33mcommit 0ccff506aa00e26bbb6007a58e8205f6d46276aa[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 6 13:30:40 2016 -0700

    Add "pixelbounds" parameter to integrators (all but MLT).
    
    Only samples within the provided bounds are rendered; the intended usage is
    debugging, when a bug is happening in a known pixel or range of pixels.
    
    (Unfortunately, the film's crop window isn't a good fit to this use case,
    since the current Samplers end up generating different samples in a pixel
    if the crop window is adjusted. Also, this takes integer pixel values
    rather than floats in [0,1], which is more convenient for this use.)

[33mcommit 761981e37361ea4f867277523a1da1f1b34eee2d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 6 11:18:46 2016 -0700

    Improve pbrt help text

[33mcommit b4c471d12641bcd2096a0ef3580c63c2955ee62b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 6 11:00:53 2016 -0700

    Error reporting improvements.
    
    Check for negative and infinite values in Film::AddSplat().
    
    Both there and in SamplerIntegrator::Render(), report the pixel coordinates
    (and sample index, if available) that led to the bad values.

[33mcommit dd6aa64ca0d7cc61dd1c0caa84d8b056ddc45ff8[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 6 10:42:02 2016 -0700

    ToString() / operator<< improvements.
    
    Added ToString() method for BDPT Vertex and Medium class.
    Added a bunch of operator<< implementations (that just call out to
      corresponding ToString() methods.)

[33mcommit 024618b0db7c492ca31e5e2a9a3b77346b211a04[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 6 08:56:26 2016 -0700

    Fix two silly bugs in stringprint.h
    
    Don't print double % signs when given "%%" formatting string.
    Fixed logic related to Assert checking for "%%" in formatting strings.

[33mcommit 280f4a8c5c084632a1b8988a6910ce2a1505a802[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 5 11:31:27 2016 -0700

    Start adding ToString() methods (to help when debugging).
    
    BSDF, BxDF, MicrofacetDistribution, and Fresnel done (including all
    implementations of respective base classes).

[33mcommit 516e1f7ba3eefdee7ec28cf5005185a8abf2fc14[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jul 4 11:54:01 2016 -0700

    Add "cat" command to imgtool.

[33mcommit dd93136b9ce17a7576087187296d469eb5097615[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jul 4 11:06:27 2016 -0700

    Change ReadImage() to return nullptr on error.
    
    Most callers assumed this anyway. :-p
    
    Updated ImageTexture to create a constant grey image and issue a warning in
    this case (as ReadImage() used to do.)

[33mcommit 6141f494eaeaef95c51f7d0a3b86579fa2ae31dd[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jul 4 10:56:48 2016 -0700

    Command line argument processing improvements.
    
    Remove --ncores option from pbrt (use --nthreads)
    Support and promote long-form switches to "imgtool diff" (--outfile and
      --difftol)
    Use a raw string constant for imgtool usage message.
    Better error checking in imgtool diff

[33mcommit 86242d46f4400bac40c50937166311e8aa8a748c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jul 1 20:18:33 2016 -0700

    isnumber() -> isdigit()
    
    (Should fix Linux and Windows builds.)

[33mcommit e0f691f89cb0df0554974317fb36a456c21fa41d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jul 1 17:12:05 2016 -0700

    Restructure image processing utilities.
    
    Collect the functionality of exravg, exrdiff, and hdrtoldr into a single
    multi-purpose tool, imgtool.
    
    Add an optional bloom filter, for adding bloom around bright regions of the
    image.
    
    Add an implementation of Reinhard et al's photographic tone mapping
    operator.

[33mcommit d94d59212bbd787e4f75d6b60a0386a693e388f4[m
Merge: aa607d0 df73a57
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jul 1 09:24:51 2016 -0700

    Merge branch 'master' of https://github.com/mmp/pbrt-v3

[33mcommit df73a572573e054f5a5dd573212a8a6a10e4d4df[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jul 1 08:43:56 2016 -0700

    obj2pbrt improvements.
    
    - Update to latest version of tiny_obj_loader
      (b69d2a2c5543026ba66ba7985447ee1726dcd700).
    
    - Correctly handle multiple materials assigned to a mesh.

[33mcommit 74b6f706e0ace470a8a1ad2c7048cb0a2b172fc2[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jun 29 10:00:37 2016 -0700

    Remove some lingering unused Kajiya-Kay code

[33mcommit aa607d0ed760f5abb981dbf92e9ef5ba8c3bd01e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jun 24 16:59:57 2016 -0700

    BDPT: don't trace visibility rays for splats from light paths too early.
    
    Make sure that the path has a non-zero contribution before tracing the
    ray. (Gives a ~2% performance benefit.)

[33mcommit f9044dd08df19bada221bf0dd56d150f343d1a65[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jun 24 16:59:07 2016 -0700

    Fix a few risky vector normalizations in BDPT code.
    
    Check for zero-length vectors in a few cases before normalizing them and do
    something sensible in this case to avoid NaNs.

[33mcommit a23888f2a4857d26b4f87fba17e340b0baaef1b4[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jun 24 16:42:40 2016 -0700

    Fix a NaN case in CorrectShadingNormal().
    
    If one of the direction vectors and one of the normals are perpendicular
    and have a zero dot product, we would return NaN. In this case, the path
    throughput weight beta ends up being zero, but NaNs were still making their
    way out.

[33mcommit 347643a44da0beec8fb982a82eada88893afe801[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jun 20 18:05:50 2016 -0700

    Be careful to not try to normalize a degenerate vector in BDPT.
    
    It turns out that with participating media, the MLT integrator in
    particular sometimes creates paths with two vertices at the same position,
    which in turn was leading to trying to normalize degenerate vectors in the
    BDPT code, which in turn led to NaN values. (This happened in particular
    with the volume-caustic scene.)
    
    The specific cause was sample values of 0 from the MLTSampler, which in
    turn lead to sampled t values of 0 in HomogeneousMedium::Sample(). (After a
    bunch of investigation, it became clear that these 0 values were
    legitimate, just things randomly lining up so that a small step mutation
    would end up exactly at 0.)

[33mcommit 597cd520cd6ff57aaea5eb071d590cf84e9a729d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 19 17:10:21 2016 -0500

    Improvements to --cat and --toply mode.
    
    Consistently use %.9g to print floating-point values. (Ensure enough
    precision, but also don't print silly things like 1.000000000 like the old
    code did.)
    
    Don't worry about things like whether we're in the WorldBlock when we're
    supposed to be so that those modes can be applied to parts of input files
    (in particular things that come in via Include.)

[33mcommit a3b7a69474b4cdbf06756af12eff79c81047fcce[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 19 17:09:03 2016 -0500

    Add -flipy option to hdrtoldr

[33mcommit 0f53102667f7f406e0819bf643621c17808f3517[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jun 15 16:08:19 2016 -0700

    Stats printing: also print aggregated times.
    
    In addition to the hierarchical profile report, also print aggregate times
    for all of the active leaf profile phases. This makes it easier to quickly
    see the total time spent on ray intersections, for example.

[33mcommit b5dbc92e7762feae4f1164376c62f26fff24e1a0[m
Merge: 0dc53b9 f46b97a
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jun 14 07:40:41 2016 -0700

    Merge pull request #75 from wjakob/master
    
    BDPT distant light classification (+ minor stuff)

[33mcommit f46b97a64f04c1b32a3ef7dcebe5cfce70e7412f[m
Author: Wenzel Jakob <wenzel.jakob@epfl.ch>
Date:   Mon Jun 13 22:20:40 2016 +0200

    OpenEXR: CMake build improvements
    
    Update to latest version of the OpenEXR fork, which addresses some
    issues when building PBRT with alternative build systems (e.g. Ninja)
    instead of GNU make.

[33mcommit 21f2ece352df58df1e42f2d6c77ba078816ad616[m
Author: Wenzel Jakob <wenzel.jakob@epfl.ch>
Date:   Mon Jun 13 22:16:36 2016 +0200

    BDPT fix: adjust classification of distant light sources (fixes #69)
    
    BDPT incorrectly classified distant light sources as a degenerate case
    of area light sources (i.e. point light sources) rather than Dirac delta
    functions in the solid angle domain (i.e. degenerate versions of
    infinite area light sources). This caused incorrect MIS weights in
    scenes using distant lights, which is addressed by this commit.

[33mcommit 88b777e37a2f12f976a6f5edd49e8f67408789c6[m
Author: Wenzel Jakob <wenzel.jakob@epfl.ch>
Date:   Mon Jun 13 22:02:12 2016 +0200

    remap0: float->Float

[33mcommit 0dc53b94acc2b361a924add4b44859bc387dd227[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 12 13:43:16 2016 -0700

    Fix (I hope) MSVC builds

[33mcommit 85d7264c17b61aff69048b99a11c646e0cb8d257[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 12 11:27:51 2016 -0700

    add RoundUpPow2 tests

[33mcommit d1fcc8d00c3055b6afdaecb3b1385b865417a083[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jun 11 11:01:06 2016 -0700

    Fix MSVC builds.

[33mcommit 91fb0c6b62539679b0201229eb996b129239e8ea[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jun 10 08:22:12 2016 -0700

    StringPrintf() improvements.
    
    Special case the "%f" formatting string and always print with enough
    precision to exactly reconstitute the original floating-point value.
    
    Move StringPrintf() to its own #include file.

[33mcommit c17cfec854de2712c0509900a7fc7501f2289a00[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jun 8 16:48:01 2016 -0700

    operator<< additions and improvements.
    
    Add operator<< (for std::ostream) for a variety of low-level classes.
    
    Update all operator<< implementations to StringPrint() to be able to specify
    more precision to accurately print values.
    
    Add unit tests for StringPrintf() and new operator<<s.

[33mcommit dfd17bb2efba4028bcffa7cdd9f0e23af4966251[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jun 8 09:12:25 2016 -0700

    Run clang-format

[33mcommit caac45624d5b146a472861a59c9040d880fc3af2[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jun 11 09:13:41 2016 -0700

    Fix bug in StringVaprintf().
    
    Reusing the same va_list a second time was a bad idea...

[33mcommit 236e1828ab2aee29e8d17b07a763ebdb017f1ec0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jun 6 20:51:59 2016 -0700

    Add _snprintf #define back (MSVC 2013 build)

[33mcommit 15cd4da617d24bfaa42894e539c10f9485b71cc0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jun 6 20:29:13 2016 -0700

    Add missing #includes.
    
    (Attempt to fix Windows build.)

[33mcommit b2eb90fbdc06ac1cc5b386379b3e1c0e2a6235b3[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jun 6 17:59:45 2016 -0700

    Fix PNG, TGA, and PFM image reading routines to not incorrectly flip
    images.
    
    Fixes issue #74.

[33mcommit f1fb77d64b5f201f73e8f1ee0c62b19ce6717b0f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jun 6 17:37:51 2016 -0700

    Move HasExtension() to fileutil.h.
    
    (Also add a few unit tests.)

[33mcommit 35bb4e7d1ca7810c490af466547e5216b878a051[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jun 6 17:27:01 2016 -0700

    Rename profilerState to ProfilerState.
    
    (Make code consistent with book text.)

[33mcommit c5306b6439e29eb8a840c3b9f19678046361449d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jun 6 17:19:41 2016 -0700

    Add StringPrintf() function.
    
    Replace most uses of sprintf()/snprintf() with it.

[33mcommit 023a4832bd439e7125d48b256679c0d710e99e81[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 5 17:50:09 2016 -0700

    Add unit tests for image i/o.
    
    For now, we're just testing that we get back the pixels we wrote out, in
    the same order.
    
    Note that everything but EXR has a (shouldn't be necessary) y flip enabled
    so that the tests will pass. Further discussion and a sketch of a solution
    in issue #74.

[33mcommit 638249e5cf4596e129695c8df8525d43f11573ff[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed May 18 20:43:55 2016 -0700

    Switch to lodepng for PNG I/O
    
    This lets us also read PNGs, which is fairly useful for texture maps.
    
    Integrated at lodepng commit db9cc960fc1fec9075fb455c617a2e0cdd7c6fb2.

[33mcommit 2d2e9bae0ac6269e9510b314bddfecfdd23356a7[m
Merge: 3a6ee15 88781a5
Author: Matt Pharr <matt@pharr.org>
Date:   Sun May 15 16:19:16 2016 -0700

    Merge branch 'master' of github.com:mmp/pbrt-v3

[33mcommit 3a6ee153a7e5e483a5c3553623c3459a90afcbcb[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun May 15 15:33:59 2016 -0700

    Correct equation numbers from fragment names

[33mcommit afdd6287dceaaec4b66b0188c73016cb4111c46e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun May 15 14:06:46 2016 -0700

    Bump copyright notices to include 2016

[33mcommit 2f208c190e21ba89b77618aadd82cffb57474f23[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun May 15 14:02:58 2016 -0700

    Remove support for stdafx.h header.
    
    With v2, we had support for MSVC precompiled headers, but it's not
    supported in the build at this point. Removing the vestigial #includes.

[33mcommit 6c09a9e6c6d2c415c7af34d6ba5908b2d0f57fa2[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun May 15 13:58:41 2016 -0700

    Check for nullptr return value from MakeAreaLight()

[33mcommit a9e9b0a4f924d5507a6da7a6b1a41ca0c13450fd[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun May 15 13:57:35 2016 -0700

    Print notice at startup if this is a debug build.

[33mcommit 28d0fce4d5ec50567bcc341fc281f77fff54d01d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun May 15 13:54:39 2016 -0700

    Remove (buggy and incomplete) Kay-Kajiya hair scattering model

[33mcommit 88781a54db02ede2af95cdd088bba9c2134e2ce2[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed May 11 10:38:07 2016 -0700

    Update MLTSampler::Get2D() to ensure consistent evaluation order
    
    (Order of evaluation of function/constructor arguments is undefined in C++, but order of evaluation in an initializer list is.)

[33mcommit c108d7d131fcdc455aead1b96b301026eb862ffa[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed May 11 10:37:22 2016 -0700

    Update GridDensityMedium::invMaxDensity
    
    (Updating for edit to book text.)
    
    Actually store just the inverse maximum density there, rather than (somewhat confusingly) also storing 1/sigma_t. Update usage to add the sigma_t factor (which in some cases just cancels out.)

[33mcommit 9246b9b322763c8fe08da336766a8cebf15ffd6c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed May 11 09:32:00 2016 -0700

    Don't use a const ref for the function passed to ParallelFor()
    
    This lets us eliminate an unnecessary dynamic memory allocation when storing the std::function for the loop body.

[33mcommit 7aa930fc02875f5611c5ec2bf73bfdc462ded3d0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed May 11 09:31:02 2016 -0700

    Add clamp to zero in SampleFourier
    
    Guard against trying to take sqrt of a very small negative number.

[33mcommit b6324b5839593febf21f6c8701ead6d1b89dc6e6[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Apr 30 17:22:27 2016 -0700

    Remove bogus ReverseMultiplyGenerator() function (and all that it implies).
    
    To save the bit reverse after multiplying by a generator matrix, it's not
    that we want to process the matrix columns in reverse order; we actually
    just should reverse the bits of the uint32s for each matrix column.
    
    Thus, removed ReverseMultiplyGenerator() and fixed all of the various
    generator matrices that were mis-ordered so that they would work with that.

[33mcommit 6792480591521a7cec0ddb4477f09567a461cf06[m
Merge: 3b1bfb6 f21a3e3
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Apr 28 08:53:33 2016 -0700

    Merge pull request #70 from koiava/patch-1
    
    Update microfacet.cpp

[33mcommit f21a3e3229d5b2f571c092ba8eccc4e89ad02640[m
Author: Irakli Koiava <i.koiava@yahoo.com>
Date:   Thu Apr 28 09:59:52 2016 +0200

    Update microfacet.cpp
    
    Missing return statement

[33mcommit 3b1bfb670464e763be0a23d1c1490a1071a1bb22[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Apr 26 08:04:18 2016 -0700

    Fix maxDepth test in VolPathIntegrator
    
    We would actually follow two interactions in the medium when maxDepth was
    1, for example.
    
    Issue #69.

[33mcommit fa82af27d73850ddf948fdf42219aa228107ff2c[m
Merge: 832a028 736e891
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Apr 17 11:51:18 2016 -0700

    Merge pull request #68 from tunabrain/msvc-fixes
    
    Fix compile errors on MSVC 2013

[33mcommit 736e8918acaead84d8212292b113384659ffd268[m
Author: Benedikt Bitterli <mail@noobody.org>
Date:   Sun Apr 17 19:47:28 2016 +0200

    Fix compile errors on MSVC 2013

[33mcommit 832a0282e0de608e90ee35a0d40445ffdc09d999[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Apr 16 08:21:19 2016 -0700

    Fix silly syntax errors

[33mcommit abad01a3477db1f6064551a4c4b906323aa8cd72[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Apr 16 08:17:58 2016 -0700

    More MSVC2013 fixes
    
    Binary constants
    Clean up some warnings
    Initializer lists in constructors

[33mcommit d80b75b24cc6186b6d338d0c6600cd0657fa6bd6[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Apr 15 18:02:59 2016 -0700

    More MSVC2013: handle binary constants

[33mcommit a5f552fda6308c9505758145f864854c3e401aee[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Apr 15 17:36:41 2016 -0700

    Another attempt at TLS for MSVC2013

[33mcommit 05ee888d662376964052722f3611f161944d8c3a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Apr 15 17:22:02 2016 -0700

    Another try at fixing thread_local for MSVC2013

[33mcommit ae716a193c844e8522b97140783a2faecb0b5a03[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Apr 15 17:05:29 2016 -0700

    Attempt to fix MSVC2013 build
    
    PBRT_CONSTEXPR and PBRT_THREAD_LOCAL to try to make it happier.

[33mcommit 233b5c9f213d01b2766a3ce8efd559f178152ff1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Apr 15 17:04:47 2016 -0700

    Update AppVeyor config to build all commits on master

[33mcommit 815d99093cacd174a7ea67e3f4590561b2325f8c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Apr 15 17:04:10 2016 -0700

    Attempt to fix MSVC2015 build

[33mcommit dfbbe31a859dc9b4635d5d1d8b40d631d4e5a0d9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Apr 15 09:58:51 2016 -0700

    Switch appveyor badge target

[33mcommit 89d39166abc2481c2919ccdf36223365cc3e21f8[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Apr 15 09:57:41 2016 -0700

    MSVC2013 build fixes
    
    (Not sure this is everything, but it's at least a start.)
    
    Issue #8.

[33mcommit fc9dc5f1809c1fff2405158006dce23b84c143c9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Apr 14 20:30:42 2016 -0700

    Collect target-specific details in port.h
    
    Try to centralize some of the compiler/target specific stuff in a single file to ease porting. Also, more generally, move to a model of #defines that indicate whether a particular capability/language feature is supported, rather than "which compiler version is being used."
    
    (As I can't test all targets easily, this may break things--I've tried to check carefully, but very well may have missed something in this refactor.)

[33mcommit 4ec5da586c799ceb98c5b36681eab45efb23dd1d[m
Merge: fdf643f 0785419
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Apr 14 18:37:03 2016 -0700

    Merge branch 'master' of github.com:mmp/pbrt-v3

[33mcommit fdf643f19223f185023f505312175d98d2fb839d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Apr 14 18:36:28 2016 -0700

    Fix handling of pbrtparse header file
    
    Previously, we had messy code in the cmake file to deal with the fact that different versions of bison use different suffixes for generated C++ header files (hh and hpp, depending). (This problem is made worse by the fact that OSX ships a 10 year old version of bison, which doesn't support the %defines directive, which would help with this.)
    
    The solution is to rename pbrtparse.yy to pbrtparse.y, which should cause all versions of bison to emit a header named .h, which is what we want. We then rename the generated .c file to .cpp and now all platforms use the same logic for this.
    
    Fixes issues #60 and #64.

[33mcommit 0785419fb98fa760255fdbc2ce8a3a328742652f[m
Merge: 19f328c d69d84e
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Apr 14 18:32:28 2016 -0700

    Merge pull request #66 from mwkm/master
    
    add AppVeyor CI for VS2013 and VS2015

[33mcommit d69d84ee9c57724a72990921858623c3d6463858[m
Author: mwkm <artixels@gmail.com>
Date:   Thu Apr 14 11:09:24 2016 +0800

    add AppVeyor CI for VS2013 and VS2015

[33mcommit 19f328c0684bcd3373967c3a6dbbd059c4ae87fc[m
Merge: 7191f6f b6dcc2d
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Apr 14 06:29:16 2016 -0700

    Merge pull request #65 from juliendehos/freebsd
    
    build pbrt on freebsd

[33mcommit b6dcc2d590049e139a8cc588cb5512f911636402[m
Author: Julien Dehos <dehos@lisic.univ-littoral.fr>
Date:   Wed Apr 13 18:52:42 2016 +0200

    build pbrt on freebsd

[33mcommit 7191f6f1c3b2645ba6b6a224df540c034590f844[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Apr 7 19:17:06 2016 -0700

    Small change to account for book text edit

[33mcommit 58edf2cfef57d0de398082112c2e8838b7453282[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Apr 7 17:53:14 2016 -0700

    Add copy constructor and op= to BDPT Vertex class
    
    This seems to be what we need to make compilers happy with non-POD types in the anonymous union. (Tested on a range of compilers that previously failed with this.)
    
    Issues #8, #52, #5.

[33mcommit 56b0aec62051f3af60eec05989895879a5c14367[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Apr 7 17:46:21 2016 -0700

    Change Point2i-based version of ParallelFor to ParallelFor2D
    
    This should help with issues #6 and #8, for older compilers that don't support SFINAE.
    
    See also http://stackoverflow.com/a/22543082.

[33mcommit 149949e442e69b75794ecce038b086a8df7bac44[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Apr 6 17:43:49 2016 -0700

    Triangle: be more careful to not normalize degenerate vectors
    
    Another (rare) source of NaNs or assertion failures.

[33mcommit 94523b8de0f020f39fd2319e343314912164f5c9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Apr 6 17:43:17 2016 -0700

    Early out return 0 from BSDF methods if wo.z == 0.
    
    This can (rarely) happen and leads to various NaN and infinity values returned from these methods.

[33mcommit 12e83bba95b9e24c805cd535133916dc58768f0f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Apr 6 09:35:34 2016 -0700

    Improve EFloat tests.
    
    There's no reason to do long chains of dependent computations versus a wide variety of individual computations; in turn, this makes it easier to debug failure cases.

[33mcommit f484ce960ac35a06d96146ae16982cec45ff7e94[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Apr 5 17:28:35 2016 -0700

    Fix usage message in hdrtoldr.cpp

[33mcommit 46370581aacb66918bcf3efa0fb5fed05125e255[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Apr 5 17:28:20 2016 -0700

    Fix a rare NaN in TrowbridgeReitz sampling
    
    If the outgoing direction was exactly on the tangent plane (i.e., wo.z == 0), TrowbridgeReitzSample11() would end up generating an infinite slope value.

[33mcommit 88d30088565c7e795d5e5805863cb7c4029d94e6[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Apr 5 17:27:32 2016 -0700

    Variable naming consistency in TrowbridgeReitzSample11()

[33mcommit c8e7f4a424588fa941b4e2666f3b18638f9f22ac[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Mar 30 17:58:28 2016 -0700

    Fix a rare NaN bug in HomogeneousMedium::Sample()
    
    If we get an infinite value back from the std::log call initializing dist, then we end up with a zero Tr value, and in turn a zero pdf. Catch this case and don't divide 0.f/0.f.

[33mcommit fdc6f73b52ea3cdc63e0467e67952a31ff563c97[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Mar 30 17:29:53 2016 -0700

    Account for continuous/discrete pixel coords in InfiniteAreaLight
    
    As nicely described by Johannes GuÃànther in issue #62, each the bucket (u,v) in the Distribution2D used by the InfiniteAreaLight for importance sampling actually represents the radiance function's value over the range (u-.5,v-.5) to (u+.5,v+.5). Therefore, after SampleContinuous() returns a uv sample position, we need to offset by half a texel in each sample dimension before performing the environment map lookup.
    
    This issue doesn't make a big difference in smooth environment maps, but it's a big deal if it's spiky.

[33mcommit 9753f300031faf0bd2169667edc160a4728b9d92[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Mar 25 17:30:08 2016 -0700

    Ensure samples are in [0,1) after remapping.
    
    In BSDF::Sample_f(), u[0] is first used to determine which BSDF component to sample; it is then remapped to [0,1) for use in the actual sampling routine. Before, due to floating-point roundoff error, it was possible that it would take on the value 1, which in turn led to NaN values in the Trowbridge-Reitz sampling routines.
    
    Fixed the same issue in FresnelBlend::Sample_f() just to be safe.

[33mcommit 624cd60b769b91d6a16c7cc92269c14928c2a426[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Mar 25 17:18:09 2016 -0700

    Add missing #ifndef NDEBUG in efloat.h
    
    Some compilers are (rightly!) unhappy with the reference to vPrecise in the Assert() in optimized builds where vPrecise isn't defined but where the Assert() is also eventually optimized out.

[33mcommit f32a1f215a7cb169857c508255b5970d6b8abdfd[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Mar 25 08:53:06 2016 -0700

    Fix bug that occasionally led to negative Li values
    
    If the opacity value returned by the texture in UberMaterial was slightly over one, then we'd end up creating a specular transmission BxDF with a slightly negative transmittance.

[33mcommit 8a2f70eb556e08cae825f53da64fc73f6d93e150[m
Merge: dd3392b b0bb9e4
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Mar 8 06:15:13 2016 -0800

    Merge pull request #61 from dakerfp/patch-1
    
    Removes duplicated include

[33mcommit b0bb9e4bf3c8621c74ac619200b07e32349dd8a1[m
Author: Daker Fernandes Pinheiro <dakerfp@gmail.com>
Date:   Tue Mar 8 09:09:32 2016 -0300

    Removes duplicated include

[33mcommit dd3392b164639879095681abb6f3684b91d2e671[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Mar 4 18:48:28 2016 -0800

    Use %option unistd in pbrtlex.ll
    
    This should help with the Windows build (when flex is available.)
    
    Issue #60.

[33mcommit ba9381f248adefac470d298d64cc8b971d1d0515[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Mar 4 18:33:42 2016 -0800

    add unit test for FindInterval()

[33mcommit e61b8ae13a24950b05529138676301b3e534f00b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Mar 4 17:48:18 2016 -0800

    Fix small nits found by -Weverything
    
    Very small image differences are possible due to fixing some unintended float->double promotions.

[33mcommit e55b612c3e3b8fd9d22af9c9e640bb636cdb7439[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Mar 4 16:54:11 2016 -0800

    Use list initializers if there are multiple RNG calls
    
    Code like Point2f u(rng.UniformFloat(), rng.UniformFloat()) isn't guaranteed to make the RNG calls in any particular order--thus, on different compilers, the two pseudo-random values may be assigned to the two Point2f values in different ways.
    
    Using a list initializer instead ensures that consistent values are used across compilers, across debug/release builds, etc., which should help with reproducability, chasing down bugs, etc.

[33mcommit 7c6de2b571e499b350ab3b296801a51b708089c1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Mar 4 09:02:18 2016 -0800

    Use std::thread::hardware_concurrency() to find # cores

[33mcommit 13784ace161bc25939128d148d248ac8edf2f1e1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Mar 3 19:25:51 2016 -0800

    Fix small bugs in BSDF tests.
    
    The value passed to std::acos() needed a clamp to fix a case where it was just slightly greater than one, and we had a small memory leak of two Transforms.

[33mcommit dcb686b12c665b4f20421d03901c6aac1e028f35[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Mar 3 19:25:16 2016 -0800

    Fix bug in DiffuseAreaLight::Pdf_Le() that caused NaNs
    
    It was passing the vector (0,0,0) for wo to the Interaction constructor, which now normalizes wo. This led to NaN values and hitting an assert in the debug build.

[33mcommit 7e1eb9ebb7c328313e1dfece4b49c4c513a69b0e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Mar 3 19:01:14 2016 -0800

    Fix some nits found via -Wall -Wpedantic
    
    Unused variables
    A missing virtual destructor for PhaseFunction
    A seemingly sometimes (but not actually) uninitialized variable
    Some ordering issues in constructor initializers

[33mcommit ac4e95eea258365f86e4ee4ebbb709e8336d3c72[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Mar 2 20:23:15 2016 -0800

    Code/naming updates to reflect book edits.

[33mcommit da10a4b258f68e971c36fbaa24bd6ac30504f140[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Mar 2 08:13:57 2016 -0800

    Rename threadIndex to ThreadIndex.
    
    (Update for edits to book text.)

[33mcommit 0a1c917dbe573511f8e1f147d0af115dac908d2b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Feb 19 10:52:55 2016 -0700

    Rewrite Russian Roulette code
    
    Match notation in the book better. No functional change, though small image diffs due to floating-point roundoff error effects.

[33mcommit 80ba5b883243dc0690c27ed9ecc206507673a5d4[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Feb 19 09:15:35 2016 -0700

    Rename various variables for edits to book text
    
    No functional change.

[33mcommit 3f338661e7f48b00189a2077299b1daf03c26601[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jan 18 08:33:35 2016 -0800

    Fix ScrambledRadicalInverseSpecialized()
    
    Issue #58. Fix thanks to Andrew Kensler.
    
    Also added unit tests for this function.

[33mcommit 534aa55ed8ed82a9c29e6d2a9559ee22da6e5161[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jan 14 19:04:13 2016 -0800

    Fix build when using SampledSpectrum.
    
    Issue #54.

[33mcommit 74cab9e396bc3df906d168198520f1ca43ea0e76[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Dec 7 18:44:07 2015 -0800

    Align MemoryArenas to cache lines.
    
    The SPPMIntegrator and the MLTIntegrator both have per-thread MemoryArenas; they allocate them in contiguous memory, which is a slight problem, since MemoryArenas are 80 bytes big; this leads to false sharing, which hurts performance.
    
    Taking best of 3 runs on a 32 CPU system with the "breakfast" scene, this fix speeds up the camera and photon pass by just ~1%, but speeds up SPPM grid construction by 36% (from 1.859s to 1.367s).

[33mcommit f66f5586786203f4fc26a54c0117985a20f6f305[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Dec 4 17:11:27 2015 -0800

    MLT: update progress more frequently for boothstrap samples
    
    This is fine now with the ProgressReporter improvements.

[33mcommit 864790f1d89042129e09af492c8e881ff57890f2[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Dec 4 17:10:50 2015 -0800

    Improvements to ProgressReporter implementation
    
    Progress updates via Update() now just increment an atomic (vs. acquire a mutex, as the previous implementation did); this should be better for scalability.
    
    Printing the progress bar is now done in a separate thread, which lets us continue to update the bar's elapsed time count even if the Update() hasn't been called for a while.

[33mcommit 0edaa576ca260312d37e569d6bf203d0b2b69b75[m
Merge: 9c7cb10 ad7eb5c
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Dec 4 09:38:56 2015 -0800

    Merge branch 'master' of github.com:mmp/pbrt-v3

[33mcommit 9c7cb106aa636553a2b93fa1749564f03ce062bb[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Dec 4 09:27:07 2015 -0800

    Run clang-format.

[33mcommit 45e195ee909886ae1bd078647682824deedacf17[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Dec 4 09:18:20 2015 -0800

    Fix PBRT_FLOAT_AS_DOUBLE build.

[33mcommit c66209d8b18690689196ac3267f5f979001841d4[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Dec 4 09:10:27 2015 -0800

    MLT: better chunk size for bootstrap paths
    
    Split into smaller chunks for better thread utilization when we have a small number of bootstrap paths.

[33mcommit ad7eb5ca95ed012d6bcc040570fa0c0ba7595948[m
Author: Wenzel Jakob <wenzel@inf.ethz.ch>
Date:   Wed Dec 2 12:14:13 2015 +0100

    PFM writing fix (addresses #50)

[33mcommit b98cc55d0197e63d6dfc6a3275a2988cd6b498da[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Nov 30 18:26:22 2015 -0800

    Fix non-MSVC build.
    
    (#ifdef issue in 3a32f45f449f.)

[33mcommit 115cdf04e3e0bfa4505223dd4e49fcc0062b8d9b[m
Merge: d3a9b5b 3a32f45
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Nov 30 18:23:27 2015 -0800

    Merge pull request #48 from mjhsnps/VS2013-port
    
    [WIP] Vs2013 port, constexpr issue

[33mcommit d3a9b5b6dacc964ee66dd4f81c75f2fba9a3006f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Nov 30 18:09:52 2015 -0800

    Add stats to track path length distribution.
    
    (Path tracer and BDPT/MLT integrators only.)

[33mcommit 0e39150cc92c27caaa0b7f32c3237803c40065be[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Nov 27 11:42:41 2015 -0800

    Remove declaration of nonexistent Transform method

[33mcommit df2bc02cedddc7034548603f3b4726b87dc81e6f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Nov 27 11:40:35 2015 -0800

    Improve parenthesization in ARENA_ALLOC macro

[33mcommit de1845c70116ce70c8e96c1819508e3be1067d3b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Nov 26 12:07:32 2015 -0800

    update README for updated scenes

[33mcommit 15ec8b14c5afb27a5fdc1a73927f85998ead8d82[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 11 09:05:49 2015 -0800

    Fix README

[33mcommit b9aa97b1f21f36b0e55be6788e0279bbe85fcc1e[m
Merge: 779c4ce 93a4ad8
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Nov 11 09:01:35 2015 -0800

    Merge pull request #49 from wjakob/master
    
    Revert back to OpenEXR

[33mcommit 93a4ad879cbee7802aa24f595de2575d800ae060[m
Author: Wenzel Jakob <wenzel@inf.ethz.ch>
Date:   Wed Nov 11 17:27:47 2015 +0100

    update README.md regarding 'git --recursive' flag

[33mcommit 65d4ee390b8810d09b501ffa4c3b719ea13eeba8[m
Author: Wenzel Jakob <wenzel@inf.ethz.ch>
Date:   Wed Nov 11 16:45:54 2015 +0100

    fix cmake for out of tree builds

[33mcommit 41d558b4ad4a99bc92a28d991e53f00916f8d1fa[m
Author: Wenzel Jakob <wenzel@inf.ethz.ch>
Date:   Wed Nov 11 16:31:30 2015 +0100

    windows build fixes

[33mcommit 0330a93c4119bcb25fb5731bb83841ca88a26ecd[m
Author: Wenzel Jakob <wenzel@inf.ethz.ch>
Date:   Wed Nov 11 15:13:24 2015 +0100

    updated readme to remove tinyexr reference

[33mcommit a83b61a2e2a5db8a482d7544b531d1962ca5a1c8[m
Author: Wenzel Jakob <wenzel@inf.ethz.ch>
Date:   Wed Nov 11 15:11:32 2015 +0100

    CMake build improvements for Linux

[33mcommit 94a32b7b6587cfa9fdc0e24791d396422d51566a[m
Author: Wenzel Jakob <wenzel@inf.ethz.ch>
Date:   Wed Nov 11 14:42:21 2015 +0100

    removed tinyexr files, check for dependencies in CMakefile

[33mcommit 4b973a9edd3cdd18b434d9df918e7019dfb4f1fe[m
Author: Wenzel Jakob <wenzel@inf.ethz.ch>
Date:   Fri Nov 6 23:50:31 2015 +0100

    Switched back from tinyexr to OpenEXR

[33mcommit 779c4cec51357dea06c2242cc119de4178cefd7f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Nov 3 20:57:47 2015 -0800

    Add more extensive EXR tests

[33mcommit 338d67f17b358cd9f3827fed6ce2b74b3d8a7b90[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Nov 3 19:25:00 2015 -0800

    Update tinyexr to 2e9f8747
    
    Add work-around for issue #43.

[33mcommit 3a32f45f449fe446b8728d1f99399f1c5dbc1930[m
Author: mjhsnps <mhayford@synopsys.com>
Date:   Tue Nov 3 08:37:15 2015 -0800

    fix VS2013 constexpr issue with thread local variables
    
    constexpr isn't truly supported in VS2013 so numeric_limits constants
    aren't evaluated at compile time. Workaround by defining equivalent
    constants.

[33mcommit 73f65e782719f8061b0bb2238798b058c51c744c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Nov 1 19:38:24 2015 -0800

    Update estimated traversal cost for BVH SAH
    
    With the original .125 (vs intersection), we almost always made leaf nodes with ~1 primitive. Bumping up to 1 gives closer to 2 primitives on average in leaf notes, correspondingly smaller BVHs, and equivalent or slightly better performance (depending on the scene.)

[33mcommit 235c801c9fe449eca6321c0d3a05f5aedd9fd790[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Nov 1 16:32:38 2015 -0800

    Add BVH statistics
    
    Track average number of primitives in each leaf node, in addition to number of interior and leaf nodes.

[33mcommit 3956737762fd629de073ec547c11670b714f4268[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Nov 1 16:31:42 2015 -0800

    Fix bug in BVH construction
    
    In the case where we wanted to create a leaf node because doing so gives a lower SAH cost than an interior node, we were incorrectly falling through into code to then create an interior node.
    
    Reported by @KammutierSpule, issue #47.

[33mcommit 9fc4824b7a820a1ce85fd7e5ed17dae38b6ab482[m
Merge: 46de256 86d667d
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 31 08:47:25 2015 -0700

    Merge pull request #40 from z-boson/fixMatrixInverse
    
    Fix corruption of stack if matrix is not invertible

[33mcommit a62559311b67b0570b5bee56c12ac406a4f90c89[m
Merge: 3f57aa7 46de256
Author: mjhsnps <mhayford@synopsys.com>
Date:   Fri Oct 30 09:09:38 2015 -0700

    Merge remote-tracking branch 'refs/remotes/mmp/master' into VS2013-port

[33mcommit 46de256c0f4dab46af04da4e2436a61d10625e23[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 28 17:43:58 2015 -0700

    Rewrite EFloat class to fix bugs.
    
    We now maintain an explicit interval, conservatively rounded to bracket the accumulated error. This approach fixes the EFloat test failures that became evident in aad1f20.
    
    This ended up being a bunch of changes, but eds up being more clear, I think, than fixing the error computaions in the earlier approach was turning out to be.
    
    Improves self-intersection errors with some quadrics (issue #44). Those tests don't yet pass, but images with cones, and {hyper,para}boloids look much better now.

[33mcommit aad1f206869bc70b305131c992da3a5a47b5bdd5[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 28 17:29:05 2015 -0700

    Improve EFloat tests.
    
    - Present a wider variety of input values
    - Improve comments and variable naming
    
    In turn, this brings to light some bugs in EFloat, and has a number of
    failures when run.

[33mcommit 4e13393f0115a6d1cc1158b86b644f1208195515[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 28 17:07:08 2015 -0700

    Fix assert hit in Triangle/Reintersect test
    
    We were making a degenerate triangle, which in turn hit an assertion when normalizing the normal vector in Triangle::Sample().

[33mcommit 2e151415c4c726ff73e8d231fd7b586952493b5f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 26 20:09:49 2015 -0700

    Reduce memory allocations/copies in ParamSet initialization
    
    Now the ParamSet::Add*() methods take std::unique_ptrs for the data values, which allows us to std::move the buffers allocated in InitParamSet() rather than allocating a new buffer and copying the values into it.
    
    Unfortunately, no meaningful performance improvement during scene construction.

[33mcommit c4833054e970b76ac609cb52c282e9e26b8f42c2[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 26 17:48:23 2015 -0700

    Allow a filename prefix for PLY files with --toply

[33mcommit edace5a21ff24e017bf62e22c056bd3f28e7a663[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 26 17:48:08 2015 -0700

    Fix handling of constant alpha values with --toply
    
    Before, we only took care of the case where a texture was used for "alpha" or "shadowalpha".

[33mcommit f2c3b99bb1df5d66ff833cfe1e85caa1d480f6e5[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 26 17:47:04 2015 -0700

    Fix dependency in CMakeLists for pbrtparse.yy

[33mcommit f1d2424dfe91d2f51fed586e8db042a386fb28e0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 26 17:46:39 2015 -0700

    Use "double" for numeric values in parser.
    
    This has sufficient precision to carry through 32-bit ints correctly.
    
    Partially addressess issue #39.

[33mcommit 3f57aa7ce05db444ea73f8938684cbaa036c5717[m
Merge: 48a9034 46691f6
Author: mjhsnps <mhayford@synopsys.com>
Date:   Mon Oct 26 12:11:04 2015 -0700

    Merge remote-tracking branch 'refs/remotes/mmp/master' into VS2013-port

[33mcommit 46691f6fa9c5d9583c32027aacc534e2535a9bc1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 26 08:21:58 2015 -0700

    Move BucketInfo definition out of BVHAccel::recursiveBuild
    
    Fixes a MSVC 2013 build error.
    
    Issue #45.

[33mcommit 26f2f7286fb8c9f7cd98768aee4a191031405f5d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 24 21:19:22 2015 -0700

    BDPT: only trace shadow ray to light if path has non-zero contribution
    
    No change in images; roughly 5% speedup.

[33mcommit 44406bcb442396d099eb4ce26d7fd22fb629675c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 24 21:30:00 2015 -0400

    PathIntegrator: skip direct lighting if specular-only
    
    This saves a bit of computation that was wasted and, more importantly, preserves sample values from earlier dimensions, which tend to be better distributed.

[33mcommit b9b3287fe11843c614e16b413821c19e28cd9901[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 24 19:07:13 2015 -0400

    Add unit test for watertight ray-triangle intersections.

[33mcommit 98ab48897bfba6cd046355bacf78865759c79984[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 24 17:12:26 2015 -0400

    Add tests for incorrect reintersection with quadrics
    
    Cone and paraboloid currently fail this test; their tests are commented-out pending fixing that.

[33mcommit 34c628d79061f1e0a2ac7649a0b4dd92b221e89f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 24 17:10:12 2015 -0400

    Tweak BSDF test sampling parameters
    
    Avoid a spurious failure from the chi2 test.

[33mcommit 92bd03d03e556a78a25b7dcf071dba41ec4f9539[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 24 17:07:04 2015 -0400

    Fix bug with partial spheres.
    
    If the specified zmin/zmax values had zmin > zmax, then the thetaMin/thetaMax values would be inadvertently swapped. In turn, this led to surface normals at intersection points being incorrectly flipped.

[33mcommit 48a90349c1a57c03d5c284c2fc32bb2366c3f9d3[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 20 17:26:16 2015 -0400

    Initialize SurfaceInteraction::wo for Triangle::IntersectP alpha test.
    
    Same issue as was fixed in 0e661584, just for the shadow ray case.

[33mcommit dd8a909e107cae7327a01eab746b318de9c511cf[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 20 17:19:39 2015 -0400

    Remove #if 0'd debugging code from Triangle shape.

[33mcommit e5ea0fda793ad63e0b436de35793408e70f175ad[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 19 22:51:34 2015 -0400

    Fix direction computation in Interaction::SpawnRayTo
    
    Eliminate incorrect self-intersections with rays at grazing directions.

[33mcommit 2878fa325c7e34bbf82d8c91182534c2730538e4[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 19 22:43:20 2015 -0400

    Add test for incorrect self-intersections w/Triangles.

[33mcommit ed15eaf0c9c729ccbc1edb8ed66a955bde82e9a3[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 19 22:41:54 2015 -0400

    Adjust BSDF sampling test parameters.

[33mcommit 56b44adbf1e9b4238d4f11d01227f915af607ce4[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 19 21:35:56 2015 -0400

    Convert tools/chi2test to be part of unit tests

[33mcommit 55f63218fa88b4278d5d63b94dee39eb047ac8ef[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Oct 18 17:53:27 2015 -0400

    Add AnimatedTransform unit test
    
    Also, remove #if 0 testing code from the AnimatedTransform::MotionBounds() method.

[33mcommit 590365f927084fc154f282a82c7d542509cb5c68[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Oct 18 17:50:45 2015 -0400

    Improve motion derivative zero finding.
    
    When applying Newton's method to find times at which motion is at an extremum:
    1. Only accept times that are inside the t interval the current call to IntervalFindZeros() is repsonsible for. This fixes bugs where many zeros would be found for motion functions that were almost flat over a section of their domian.
    2. However, still accept points that are slightly outside of the interval to allow for floating-point roundoff error.

[33mcommit 86d667da744f887dc3e70d11d86debe0836b0a4e[m
Author: Daniel Punz <lichtquant@hotmail.com>
Date:   Fri Oct 16 19:42:39 2015 +0200

    fix corruption of stack if matrix is not invertible

[33mcommit c770245900418a340bfcd7e90e818b6a2e929098[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Oct 15 10:01:46 2015 -0700

    Update readme

[33mcommit f2a63513cfa0403ceaa4ec71cce7e9b8b95ba77f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Oct 15 09:59:44 2015 -0700

    Fix rare case that led to NaNs/asserts in BDPT
    
    Very rarely, two vertices being connected may be coincident or have a zero squared distance between them.

[33mcommit 0e661584280d8515fa16fdb13726ca7e932fab80[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Oct 15 09:58:16 2015 -0700

    Initialize wo in SurfaceIntersection for alpha test
    
    Triangle::Intersect() was previously passing (0,0,0) for the wo direction, which in turn hit an assert in debug builds when the vector was normalized.

[33mcommit abbe53f59ba5d345f2a8cf30206fb7772079516a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Oct 14 08:04:25 2015 -0700

    Add Distribution1D unit tests
    
    Also, minor formatting cleanups in tests/sampling.cpp.

[33mcommit 786149b71df62ec0f693340625231bdaaf539b49[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 13 20:30:13 2015 -0700

    Remove stale testing code.

[33mcommit d66187f0b4dde8966e255b6a333a984b5804cc4f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 13 18:56:49 2015 -0700

    Add stat to track % of paths that carry no radiance
    
    This can be an interesting number to show how well (or not) various light transport algorithms are doing at finding light-carrying paths.

[33mcommit a5a9c9c2dc4d6b99958328fe461818fdf9a43ecd[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 13 18:55:31 2015 -0700

    Reduce default focal distance to 1e6.
    
    The previous value, 1e30, led to overflow and thence NaNs, if rendering was done with a non-pinhole aperature.

[33mcommit 9b06a84789d232993cd5d743d131d96e76960216[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 13 18:54:25 2015 -0700

    README updates

[33mcommit 4fd001f37cbcf697dbf3ffd50c59b5cd28fa3f20[m
Merge: 1662a46 e50a491
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 13 18:44:36 2015 -0700

    Merge branch 'NextDesign1-master'

[33mcommit e50a491a255c34cde208c7c684455c1348e8db05[m
Merge: 1662a46 0484719
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 13 18:43:57 2015 -0700

    Merge

[33mcommit 1662a46621e01caf0173d536194a53637f7065a3[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 13 18:40:05 2015 -0700

    Use __declspec(thread) for thread_local on pre-2015 MSVC
    
    Issue #10

[33mcommit 6c2c7eb5bc7779acee90a25df1de1820d9ec21fe[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Oct 13 18:39:39 2015 -0700

    Use _isatty() for isatty() with MSVC
    
    Issue #10.

[33mcommit 03f56a0e223cd7d5d88d09e4fbfb63dd9541a0ac[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Oct 11 07:48:46 2015 -0700

    Fix bug in ply conversion (shadowalpha)
    
    "shadowalpha" textures weren't being correctly carried through.

[33mcommit 498b6c2f079f7af69e004b1ac24969d8d57dac0e[m
Merge: 8eba643 63ff116
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Oct 9 16:59:17 2015 -0700

    Merge branch 'master' of github.com:mmp/pbrt-v3

[33mcommit 63ff11673bed0c33de17db059d56dbc72c3db420[m
Merge: 0d05cb0 f1326ad
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Oct 9 16:58:54 2015 -0700

    Merge pull request #38 from Twinklebear/master
    
    Improve error handling for missing lenses and other integrator load failures

[33mcommit f1326ad904144fb15dd1182bc555c06ac8e153cb[m
Author: Will Usher <willusher.life@gmail.com>
Date:   Fri Oct 9 12:52:41 2015 -0600

    Return null integrator to send load failures back up to exit cleanly

[33mcommit 0198b9695b0500ea4c71c8c9466b9a0f264aba0f[m
Author: Will Usher <willusher.life@gmail.com>
Date:   Fri Oct 9 11:51:37 2015 -0600

    Fix improper call of Error(), we should pass a c-string not std::string

[33mcommit 387d95bc59b0fe900c54c3ec92ef801d6960fe23[m
Author: Will Usher <willusher.life@gmail.com>
Date:   Fri Oct 9 11:45:58 2015 -0600

    Fix handling of missing lens files to print out an error and exit

[33mcommit 8eba6432010e78a32811d8bf1974a3f980a5c7ed[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Oct 9 09:46:33 2015 -0700

    Small code formatting improvements in triangle.cpp.

[33mcommit 37701a61369634c77e0b8acce8109c145584b275[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Oct 9 09:46:16 2015 -0700

    Add --toply command line option
    
    Similar to --cat, in that it prints an equivalent scene file to stdout, but it also creates a PLY file for each triangle mesh in the scene and rewrites the scene file to use them.
    
    Removed the PBRT_DUMP_PLY environment variable hack to dump a ply file for each triangle mesh, which was less useful.

[33mcommit 39e88e478920dd9ac62c71ae2cff57b67bcb619d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Oct 9 09:39:38 2015 -0700

    Make sure that Interaction::wo is normalized
    
    Arguably, this should be the responsibility of the callers, but at this point, it's easier to fix this in the Interaction implementation.

[33mcommit 6fdba338c91893b6c957009125306e208d5547bb[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Oct 8 12:23:53 2015 -0700

    Add pbrt --cat option
    
    This parses the input files and writes them back out to stdout (with a bit of reformatting and cleanup.)

[33mcommit 0d05cb0860f2ded08e9b411c8b72d581c6af8246[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Oct 5 20:38:41 2015 -0700

    Add "shadowalpha" texture for Triangle shapes.
    
    Makes objects invisible to shadow rays.

[33mcommit 58c440d3956405cb2d4a3ccc3895f6a17979fc9e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Oct 4 15:19:37 2015 -0700

    Fix usage of strncat in pbrtlex.ll
    
    Also update prebuilt pbrtlex.cpp.

[33mcommit 37b375453afe2553269fa419ba656fb135e8f35f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Oct 4 15:14:13 2015 -0700

    Use ParallelFor() for SPPM statistics update
    
    With 8+ cores, doing this serially was starting to be a bottleneck (hello, Amdahl's law).

[33mcommit 5fe9e370d829a759619a41e2c28c7984486e0c2c[m
Merge: 8fe0a20 9fbee03
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Oct 4 11:02:13 2015 -0700

    Merge pull request #34 from Twinklebear/master
    
    Small tweak for VS2105 debug build: Fix template ambiguity with fpclassify in isnan

[33mcommit 8fe0a207a2617b681c7f2f87278658758ab84241[m
Merge: 49c37d2 ace5d5e
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Oct 4 11:00:01 2015 -0700

    Merge pull request #35 from tristanpenman/master
    
    Fix order of arguments passed to StratifiedSampler constructor

[33mcommit ace5d5e436e49d32d4edb3eb67067ef8e9196daf[m
Author: Tristan Penman <tristan@tristanpenman.com>
Date:   Sun Oct 4 22:34:01 2015 +1100

    Fix order of arguments passed to StratifiedSampler constructor

[33mcommit 9fbee035380386d77195cf1f6422e880d099b757[m
Author: Will Usher <willusher.life@gmail.com>
Date:   Sat Oct 3 23:47:43 2015 -0600

    Use inline instead of constexpr, some compilers more strict than msvc

[33mcommit a558650b9b5b5b10b71cbe8b4b1922b28954eefa[m
Author: Will Usher <willusher.life@gmail.com>
Date:   Sat Oct 3 23:28:58 2015 -0600

    Small tweak for VS2105: Fix template ambiguity with fpclassify in isnan
    
    This last tweak gets things building for me in VS2015

[33mcommit 49c37d2c4b6a9ef525aaa7eb9ee951ef7653d3ac[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 3 16:27:41 2015 -0700

    Fix bogus expr parenthesization in maxmin.h

[33mcommit 5eb36163d8326304913e7615c5cc2d51c86835d6[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 3 16:27:22 2015 -0700

    MSVC build fixes

[33mcommit 1e4f48ea74dd82dea9735b0569d3f1d0f4a5ab1d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 3 10:18:23 2015 -0700

    Update LICENSE.txt
    
    Bump up years.
    Add Wenzel.

[33mcommit 96c05ca4efc809653e7714e8ce04051c9e314d74[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Oct 3 09:21:43 2015 -0700

    ProgressReporter: don't issue error for ENOTTY from ioctl()

[33mcommit 1968b0e604a66e76f3ea09d8a58ae9368573d8cb[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Oct 2 16:45:56 2015 -0700

    More MSVC build fixes.
    
    WIP issue #32.

[33mcommit 89fd95cd46b456bfd045ed0b061c5eaf5d29aaff[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Oct 2 09:14:03 2015 -0700

    ProgressReporter: use int64_t to track work done.
    
    (Missed this when switching to an int64 for totalWork.)

[33mcommit c6d8b4e894ddf6d70437826f8283d4c8bb18ba04[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Oct 2 09:13:25 2015 -0700

    Remove unneeded #includes from checkerboard.h

[33mcommit d580915008ba42358c480d9b268b45088456a13d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Sep 30 08:54:01 2015 -0700

    Improve Russian roulette probabilities in path tracers
    
    Use 0.95 for the maximum survival probability, rather than 0.5. With 0.5, we'd get huge variance spikes when tracing long paths in high-albedo surfaces/media.

[33mcommit 898729fde5df5ac831b417c49c181102aa64182e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Sep 30 08:30:56 2015 -0700

    Add missing maximum depth check to VolPathIntegrator
    
    We were only terminating paths due to hitting the maximum depth at surface interactions(!).

[33mcommit ce394415fa2211ffa31cc0d1df919ef69edb407c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Sep 30 08:29:48 2015 -0700

    Add a few statistics to the VolPathIntegrator

[33mcommit 57b2fdc77139d35c2d0f3ddef07ff14df1a255ab[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Sep 30 07:23:41 2015 -0700

    Fix difference image computation in exrdiff
    
    It was broken when alpha was dropped from pixels returned from the image reading routines.

[33mcommit 40a0c95a3cf30111c8dd914bef49b38d874e044a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 29 17:55:22 2015 -0700

    Add parser dependencies to CMakeLists.txt

[33mcommit 7b1161859ef9f61c0e5bd17f67e56d336f8fb836[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 29 17:54:58 2015 -0700

    Strlcpy() isn't as widely available as the OSX manpage claims.

[33mcommit 241362fcdf35fccc46ec2db262745fa45a0d54c9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 29 17:40:28 2015 -0700

    Add some Sampler-related unit tests.

[33mcommit e3ae52c675bfbdd7d81900a7517d9ba68bed67df[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 29 17:20:30 2015 -0700

    Fix a number of issues found by Coverity.

[33mcommit fd3d526f8c215e39004e41e1a80da79f33be9c0e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Sep 28 20:36:18 2015 -0700

    Improve RealisticCamera Mathematica output
    
    For DrawRayPathFromScene(), draw a dot at the optical intercept (as is already done for paths from the film).

[33mcommit 9b468f53d82b6f10f3e6d958d8f41ae05bb80b76[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Sep 28 20:35:19 2015 -0700

    Use int64 for loop indices / range in ParallelFor

[33mcommit f63eea6887d7ef7101e7d8ac5b6af85a60cdb434[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Sep 28 17:14:08 2015 -0700

    Fix MaxMinDistSampler matrices
    
    The CMaxMinDist generator matrices used by the MaxMinDistSampler were completely broken (and such, that sampler generated lousy points.) They are now correct.

[33mcommit e9ed290c39c3f9ae02a48390b41cd9a7c8dd3ed8[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Sep 28 08:30:42 2015 -0700

    Add some unit tests for sampling routines

[33mcommit fdea0786684842adf001daead549fc37f9484ad6[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Sep 26 14:47:20 2015 -0700

    More consistently exit immediately if unable to create Sampler, filter, etc.

[33mcommit 79a474c1fad8e42e90fabb0a4276c4f2e53c21c5[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Sep 26 14:43:45 2015 -0700

    Fix BDPT and MLT integrators to not crash if there are no light sources

[33mcommit 9115712eac4384794b8ed9c51398d4fafba98a45[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Sep 26 14:30:00 2015 -0700

    Fix FourierMaterial to not seg fault if file not read successfully.

[33mcommit 30bdc49ea533232c86be097c76cbf787f13cc528[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Sep 26 14:18:47 2015 -0700

    Clang-format run

[33mcommit ee238c9d656140745d96f32f206b7eb48fc9e5ab[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Sep 26 14:12:58 2015 -0700

    Remove unused RNG parameter from BSDF::rho() method

[33mcommit dbebfc35e42dcb79ef3ffdc6b4c83ef2845d4bfd[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Sep 26 13:56:51 2015 -0700

    Various fixes to try to get the MSVC2015 build working.
    
    Missing header files.
    Hexadecimal floating-point constants converted to decimal (feh).
    
    Issue #32.

[33mcommit a4033f7cf9b5ea0b1b39f51c232053bb7ee8ca0f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Sep 26 13:30:16 2015 -0700

    Add support for anisotropic MetalMaterials

[33mcommit ea24653c67d931f6f1ee0a0f7959f99d53677880[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Sep 23 07:38:40 2015 -0700

    Small obj2pbrt improvements
    
    Allow map_Bump for bump maps.
    Don't create constant textures for Kd/Ks; just supply a color parameter directly.

[33mcommit 91382658e75a1a184d871798b8163649325486e7[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 22 06:32:44 2015 -0700

    Integrate from book source
    
    Minor code motion, cleanups in media/grid.*

[33mcommit ee95eb23eb9f445107b8c72aa459ad8489efdf1e[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 15 18:15:21 2015 -0700

    Fix mingw build
    
    Issue #27.

[33mcommit 3d1e59c84e965541f4d617894606abb13810ccb0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 15 18:00:45 2015 -0700

    Integrate from book source
    
    MLT speedups from not updating the progress bar so frequently.
    Fixed a NaN issue in FourierBSDF::Sample_f().
    Replace some std::upper_bound() calls with calls to FindInterval().

[33mcommit 66e5f205846f32c4f39d2c089b2e2fc578890ac0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Sep 11 08:31:45 2015 -0700

    Don't use graphicsState.materialParams when making named material
    
    Those should only be used for materials specified via the Material
    directive.

[33mcommit fc830407ccc6708a574820c162b48078a9f20914[m
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Sep 11 08:31:15 2015 -0700

    Clamp cosThetaI to [-1,1] in FrConductor()

[33mcommit a05eb56e0fb6aff3a529e3cce3337ad7f4b97c20[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Sep 8 18:33:14 2015 -0700

    Update from latest book source
    
    Switch to sRGB for 8-bit images.
    BDPT: don't trace shadow rays for zero-throughput connections!
    Handle null BSDF in direct lighting and whitted integrators
    Make curve second endpoint tangent test match code for first endpoint.
    Remove unused Medium::Pdf() method.
    Round color values when converting to 8-bit for image storage.
    Lots of small formatting and naming changes.

[33mcommit b326ff842d2cd6dd9fb4d869cbda12e8e2510b07[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Sep 2 20:31:53 2015 -0700

    Fix test/exr.cpp
    
    Tests were failing due to this not having been updated for a tinyexr
    API change integrated in 8d916d0e81695fd87fccffcb99cb220b7f0466b5.

[33mcommit d5b0f783c53faebb58e2442ccda9c5f10eca0c51[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Aug 27 21:46:41 2015 -0700

    Integrate from book source.
    
    Just naming and formatting cleanups. No functional differences.

[33mcommit 919b47c8daf692251f31bb61ec642f6d65f3eff9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Aug 23 15:40:25 2015 -0700

    Integrate from book source
    
    Mostly small naming cleanups.
    Improve MLT bootstrap efficiency by not allocating so many MemoryArenas
    Support >2B mutations in a Markov Chain with MLT.
    Add small test for Henyey-Greenstein phase function

[33mcommit 69a3d5132d73f2abbbccde8014403d77cb7e7559[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Aug 20 21:36:19 2015 -0700

    Fix BVHAccel issues noted in issue #22.

[33mcommit aff8e2b11cab4f9fcf9235877325b2481e595694[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Aug 20 21:15:34 2015 -0700

    Fix horrific bug in Sobol sampler with crop windows (issue #17)
    
    Crop windows weren‚Äôt being properly accounted for.

[33mcommit 89ac8e8ec44f4e4a8533d85ea7e29f56a36342fe[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Aug 20 21:15:09 2015 -0700

    Integrate from latest book source
    
    Big changes:
    Switch to PathIntegrator for default Integrator
    Switch to HaltonSampler for default Sampler
    Switch to 16spp for default number of pixel samples.
    Fix uninitialized memory bug in InitProfiler()
    
    Smaller changes:
    Add profiler category for camera ray generation.
    Many naming cleanups, as usual.
    Return exit pupil bounds from RealisticCamera::SampleExitPupil() to make
      ray weight computation more straightforward.
    Use unique_ptr for Mapping[23]D in Texture implementations

[33mcommit 42f3fa05644000a31b27a0ec706286771df9b9e0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Aug 12 12:06:07 2015 -0700

    Integrate from book source.
    
    Variable naming and code structuring; no functional changes.

[33mcommit 8d916d0e81695fd87fccffcb99cb220b7f0466b5[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Aug 12 12:05:11 2015 -0700

    Update to latest tinyexr (eeef0f691e881b651cde78c7a14f4a83f2a92b83)
    
    Adds support for reading PIZ compressed images.
    Improve pbrt‚Äôs usage of the tinyexr API.

[33mcommit fe2b79b4536ca0597645178c0170bd37c57fae39[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Aug 11 15:01:54 2015 -0700

    Pay attention to testAlphaTexture in Triangle::IntersectP().

[33mcommit 2b20576757df65cd1a49276b97ee3333217ce540[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Aug 11 15:01:27 2015 -0700

    Work-around test fail with different RNG seed.
    
    Shameful, but no time to fix properly right now.

[33mcommit 5b483eec929ffe599be5ff089860ef8772f7deaa[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Aug 11 15:00:58 2015 -0700

    Fix very silly bug in sampling profiler.

[33mcommit 4c5a33c8c3f97015a8fd848bf4018dfaf1850306[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Aug 11 10:04:01 2015 -0700

    Integrate from book source
    
    Remove Ray::depth; pass it through in the places where it is needed.
    Many variable name and small code cleanups.
    BSSRDF improvements
    More C++11isms
    Clean up RNG interfaces
    Fix subtle bug in LatinHypercube() sample shuffling

[33mcommit 9a854e3e9a079fb3d524aaa7f450a0046030cbc5[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Aug 11 09:56:23 2015 -0700

    Integrate from book source
    
    Add sampling-based profiling system
    Make threadIndex a global; remove parameter from ParallelFor() variants.

[33mcommit 740ac12bae6ff8e0e8fb72f988d9c9967928cbb6[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Aug 6 15:10:16 2015 -0700

    Integrate build fix from @juliendehos (issue #24)

[33mcommit c0721c21427bd61aca20960ac5304529a8e494b1[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Aug 6 15:09:22 2015 -0700

    Integrate from book source
    
    Tiny formatting nits.

[33mcommit bc1038d562ca52a25e912469018833caae3fe52c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Aug 5 07:35:37 2015 -0700

    Fix build: add missing #include <atomic> to core/parallel.h

[33mcommit f0c37312fb88dffec8a44610ccf06a0ed04755df[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Aug 5 07:33:43 2015 -0700

    Integrate from latest book source: peeled off BSSRDF stuff into core/bssrdf.*

[33mcommit 590852bb90c9f441505903c74c2a257899fb2365[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Aug 5 07:28:36 2015 -0700

    Update from latest book source
    
    Rename Camera::Pdf_Wi() to Pdf_We()
    Add AtomicFloat class
    Use it for splats to the image (fix memory growth with high spp)
    Also use it to make SPPM updates fully thread-safe
    Improved method for computing exit pupil in RealisticCamera
    Ongoing BSSRDF improvements

[33mcommit 7322b8cc0778c1df3d08b1c0c1ae8a5d31fe2db3[m
Merge: f719af3 a90a9c8
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 29 06:10:12 2015 -0700

    Merge pull request #18 from tdapper/master
    
    PBRT Exporter for Cinema 4D

[33mcommit f719af3ca5f3fd60c54f8145056abe7a569624de[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 28 20:05:32 2015 -0700

    Update to latest version from book source.
    
    Ongoing BSSRDF details (issue #19)
    Otherwise naming and restructuring in BDPT, MLT, and SPPM.

[33mcommit e9b957aaca14a58ad69b1b2ed017c1ca8f5f70a7[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jul 26 19:18:06 2015 -0700

    Update from latest book source
    
    BSSRDF and phase function fixes (see issue #19 for discussion)
    Other small naming cleanups

[33mcommit bee34602f6fc947396b8772208d6a98707275050[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jul 25 20:41:50 2015 -0700

    Integrate latest changes from book source.
    
    Mostly just naming and code reordering.
    Small image diffs expected with SPPM due to change in how random
      samples are generated.

[33mcommit 502a075be7ec927ed4caa3edb809cc524b3d44e0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jul 20 08:46:38 2015 -0700

    Update README.md to use mmp/pbrt-v3 at travis-ci.org for build status.

[33mcommit 55ae2f94195ff61d55125f406ae544a00461b387[m
Merge: 6b6c30f f43b3e9
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jul 20 08:42:32 2015 -0700

    Merge pull request #20 from ambakshi/master
    
    Add Travis-CI support

[33mcommit f43b3e9285338f6c38ddb1b9992a12cf6ec80c5b[m
Author: Amit Bakshi <ambakshi@gmail.com>
Date:   Sat Jul 18 19:22:11 2015 -0700

    Add Travis-CI support
    
    The Dockerfile is to simulate the environment that
    Travis-CI uses.
    
    To test locally, first create the build container:
    
        $ docker build -t pbrt:latest .
    
    Then run the image (it executes make by default):
    
        $ docker run -ti --rm pbrt:latest
    
    To get a copy of the binaries, mount a local directory
    into the docker container:
    
        $ mkdir build
        $ docker run -ti --rm -v $PWD/build:/app/build pbrt:latest
    
    The output will be in $PWD/build.

[33mcommit f71d65f3ed74a6791f1971c41a95983aee0b796c[m
Author: Amit Bakshi <ambakshi@gmail.com>
Date:   Sat Jul 18 19:26:58 2015 -0700

    Fix capitalization of Threads CMake module

[33mcommit 6b6c30f1e2bdb0052aed0136638d7c6106de779d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 14 18:43:50 2015 -0700

    Sphere shape sampling improvements.
    
    Remove 1.0001f fudge factor in determining if a point is inside the sphere.
    Tidy up derivation of computing point on sphere from sampled angle theta
    Remove an unnecessary CoordinateSystem() call.

[33mcommit 19c8b7efb7ad521a6adff5afe01a4dc3d99a30ff[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 14 18:42:58 2015 -0700

    DiffuseAreaLight: remove check for coincident light and sample point.
    
    This doesn‚Äôt actually seem to be a problem.

[33mcommit cdc5fba74d015221c2a8a46a67c149cc0a5b0fa0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 14 18:41:49 2015 -0700

    Store a MediumInterface, not a Medium * in the Light base-class.
    
    This makes more sense for area lights, in particular.

[33mcommit 80b088aa71672442c256a5ef74f158f2764aaa29[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 14 18:39:47 2015 -0700

    Camera: use Severe(), not Error(), for fatal errors

[33mcommit 94128fd330db40f0ce1c2aa01df9634150df6d12[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 14 18:39:30 2015 -0700

    PerspectiveCamera cleanups
    
    Compute image plane area once, in constructor
    Small cleanups and variable naming in importance-related methods

[33mcommit 6e7c5c091ac9d7f83358cdeae9c99d105ebafd94[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 14 18:38:54 2015 -0700

    Integrate BDPT and MLT changes from book source
    
    Remove Film::Splat(), add FilmTile::AddSplat()
    Variable naming consistency.

[33mcommit 42cefd1e4be24855f53ff87b1ee4dbd3fbb863d3[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 14 18:34:49 2015 -0700

    Integrate from book source
    
    Various small formatting fixes.

[33mcommit 9f7dd201fc254623ccc298c2ccd42a0eb047ae4c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jul 14 18:31:10 2015 -0700

    Move FourierBSDFTable::Read() from reflection.cpp to fourier.cpp

[33mcommit a90a9c8add7a75eed394626789daae90346c8d9d[m
Author: Timm Dapper <timm.dapper@laubwerk.com>
Date:   Sat Jul 11 11:40:11 2015 +0200

    Converted readme to markdown format.

[33mcommit f735e36588e5d8b4612791b5924167c165352c0d[m
Author: Timm Dapper <timm.dapper@laubwerk.com>
Date:   Sat Jul 11 11:34:37 2015 +0200

    Added information about integrator settings to the readme.

[33mcommit 37740786d9b27895b7fdd4668c7c995abd3923bb[m
Author: Timm Dapper <timm.dapper@laubwerk.com>
Date:   Sat Jul 11 11:31:18 2015 +0200

    Added pbrt exporter for Cinema 4D.

[33mcommit 49e45c9bfaf64830bde1e2fb128d9772be100177[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 8 21:37:03 2015 -0700

    Integrate MLT updates from book text

[33mcommit 4aa7f29164bda99c74fac6425b3fe8afd59f46b9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 8 21:36:42 2015 -0700

    cmake update

[33mcommit fb4820bc20ddd1f771fbfd9df4926937ab493fa5[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 8 21:36:34 2015 -0700

    Project sampled points onto shape Surfaces.
    
    Improve computation of projected error bounds.

[33mcommit 1c9d99b2c4ea14dfaec625158e45eec51736f356[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 8 21:35:50 2015 -0700

    More variable naming and no-op code cleanups.

[33mcommit 2b11e986e915b3e381bc5d6565e1bf95c26c8a67[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 8 21:34:36 2015 -0700

    Update signature of MicrofacetDistribution::Pdf

[33mcommit 3b843acc807789bd3751273fa4776314fdcd680c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 8 21:32:03 2015 -0700

    Update naming of light sampling methods.
    
    Distinguish better between sampling incident radiance and sampling rays
    leaving the light.

[33mcommit 7d67aaf0367b42a908cbbdc419b7ce915dfae709[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 8 21:28:54 2015 -0700

    Update README

[33mcommit 4a5c2b5c2d4dc6fdaca4445c891979e3b985413f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 8 21:28:46 2015 -0700

    Integrate latest changes from book source
    
    Variable naming: costheta -> cosTheta, etc.
    Small formatting cleanups.
    Use size_t for various loop indices.

[33mcommit f52ec71a4e4a6925178fa190b87c55f0ebccfe4a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jul 4 14:43:03 2015 -0700

    MLT update from book text.

[33mcommit d81417ef2ef37d34b0cffc6ee782c302f7ef5d81[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jul 4 14:42:11 2015 -0700

    Fix bugs in uber and translucent materials.
    
    (Order of index of refraction parameters was wrong.)

[33mcommit ec4e1161837c31d5bc734f2fed6259f00e371cb8[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jul 4 14:41:40 2015 -0700

    Update from book text.
    
    Return Interaction directly from Shape::Sample() methods.
    Improve naming of Light::Sample_L() parameters
    Fix bug in SpotLight::Pdf() and ProjectionLight::Pdf() where the ray‚Äôs
      direction wasn‚Äôt being checked against the sampling cone.
    Sundry variable naming improvements.

[33mcommit 3cf0563d9614b49a2fe1dd1240369bcd0d135c86[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 1 19:15:56 2015 -0700

    Better approach for computing sample point on spheres
    
    via http://ompf2.com/viewtopic.php?f=3&t=1914&p=4844&hilit=pbrt#p4414

[33mcommit 7da51212e610e40ea27621b32ff12c2334a1dcc9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Wed Jul 1 19:14:48 2015 -0700

    Integrate latest changes from book source.
    
    Cosmetic improvements only: variable naming, more code fragments, etc.

[33mcommit 04847197fb81aefed0a4057dc1b605b5e97c113d[m
Author: John Mather <NextDesign1@users.noreply.github.com>
Date:   Wed Jul 1 13:45:04 2015 -0400

    Added support for the Intel compiler

[33mcommit 0812362eabc50753772314ebcbbf72ae59a10af7[m
Merge: 502c94d 604c647
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jun 30 17:19:37 2015 -0700

    Merge pull request #14 from NextDesign1/master
    
    Added compilation fix for GCC 4.9.3

[33mcommit 502c94db3d36bcc3c68a81129d85fcd9fd93b2e8[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jun 30 17:19:34 2015 -0700

    Curve updates from book source
    
    Mostly small cleanups, naming issues, but will have slight image
    differences due to using the actual underling spline for some operations
    where the linearized segment was being used before.

[33mcommit 74d9842356849833b2c91e3b1c7011444a52fe0f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jun 30 17:18:43 2015 -0700

    BDPT updates

[33mcommit 60a5e4696e8c02a7702ab326e1373a2016b19251[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jun 30 17:18:26 2015 -0700

    Change compare_exchange_weak to make icc happy.

[33mcommit 00213d88ea96812047b10974076601beeeae34e4[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jun 30 17:17:56 2015 -0700

    Integrate recent changes from book source.
    
    Small code simplifications, removal of unnecessary braces, updated
    fragment naming,

[33mcommit 604c647524cf51018cd18aa3ee47a64c0721e3cf[m
Author: John Mather <NextDesign1@users.noreply.github.com>
Date:   Tue Jun 30 16:37:42 2015 -0400

    Added compilation fix for GCC 4.9.3
    
    Added fix for GCC 4.9.3, as pbrt_test was failing to build, and pbrt would not run.

[33mcommit 58e96ad07ab0855a9f380e4ac0b1a58f11c8ca39[m
Merge: 1eaa295 adeaaaf
Author: Matt Pharr <matt@pharr.org>
Date:   Fri Jun 26 07:01:59 2015 -0700

    Merge pull request #12 from syoyo/sparc-fix
    
    Add SPARC architecture.

[33mcommit adeaaaf8c91d6795430ad527decac7c330164b97[m
Author: Syoyo Fujita <syoyo@lighttransport.com>
Date:   Fri Jun 26 14:51:28 2015 +0900

    Fix ifdef expression.

[33mcommit 976ce1602a63fc12d78e6d678a657950beda6da0[m
Author: Syoyo Fujita <syoyo@lighttransport.com>
Date:   Fri Jun 26 14:48:52 2015 +0900

    Oops... the value for IS_BIG_ENDIAN was inverted.

[33mcommit c626292000f0d222d94a6a2fd0c948a12b7da601[m
Author: Syoyo Fujita <syoyo@lighttransport.com>
Date:   Fri Jun 26 14:44:13 2015 +0900

    Fixes the test fail on big endian machine.

[33mcommit b082cf294b8ee77775a3195585b3fb4d4a150b07[m
Author: Syoyo Fujita <syoyo@lighttransport.com>
Date:   Fri Jun 26 14:20:13 2015 +0900

    Add SPARC architecture.

[33mcommit 1eaa2955624758a808574a00547927cd1165f46b[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jun 23 08:43:20 2015 -0700

    cmake improvements
    
    Release build by default
    Include core/*.h in the library definition (nicer Visual Studio experience)
    Disable some not-useful warnings
    Add an explicit dependency on pbrtparse.hh for compiling pbrtlex.cpp.

[33mcommit 5fbf73aaafc33737633659d4feee3babd205f16d[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jun 23 08:41:54 2015 -0700

    Integrate recent integrator changes from book source.

[33mcommit 384b5a87422b0bec7b9658cf599cc425bfed5b56[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jun 23 08:41:36 2015 -0700

    MSVC build fixes.
    
    (Still a WIP.)

[33mcommit 110c0e8405e5d9f35d86256bb4b4231b19a66b69[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jun 23 08:40:35 2015 -0700

    ProgressReporter: use int64_t.
    
    The 32-bit int would overflow for big renders with many samples with
    MLT, which in turn caused predicted time remaining to be stuck at 0s
    throughout the render.

[33mcommit 829b0bd08978850e91e0899c72d0ea5818850a41[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jun 23 08:39:39 2015 -0700

    Update prebuilt lex/parse C++ files.
    
    (Noted in issue #9)

[33mcommit ac191253bde8d572da9ac3f584014549193bbcb0[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 21 10:14:55 2015 -0700

    #define constexpr const for MSVC build

[33mcommit da40853adbc42e105b2154c72c9111bcb95d2d17[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 21 10:07:34 2015 -0700

    Small SamplerIntegrator/WhittedIntegrator cleanups.

[33mcommit 701d26d0fbf41100e23c899ddb25c8cdb18abeba[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 21 10:07:07 2015 -0700

    See if MSVC is happier if we remove const from ParallelFor() argument.

[33mcommit 0290cbdc9598e42839b9e900ea8d78005e6f737a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 21 10:06:16 2015 -0700

    Windows build fixes.

[33mcommit 78bab644680ce58795027f38c1fdc6fb55e0dae9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 21 10:05:53 2015 -0700

    cmake improvments: pbrtparse.hh handling

[33mcommit ba8cd48da8cfe1c542431e56564ab459fd6e0664[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sun Jun 21 10:05:38 2015 -0700

    Update to README.md to reflect that the build is not so much an issue now.

[33mcommit b7d260d983df35cb94e0a4af3315d1ac95138373[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jun 20 20:41:07 2015 -0700

    Integrate changes from book source.
    
    No meaningful changes; just detrius from small differences in the
    reverse integration of pull request 5.

[33mcommit 7e406cab8c66001f28727771e4e1487af2a965b9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jun 20 20:39:32 2015 -0700

    Integrate changes from book source
    
    CreateSPPMIntegrator()
    Quick render support for MLT

[33mcommit d49982ac26466f62d84c353aa809d9434eb4013e[m
Merge: 6eae544 1a1883f
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jun 20 20:24:03 2015 -0700

    Merge branch 'tunabrain-windows-mingw'

[33mcommit 1a1883fc6d9c63ded24d82dbfe1cec96665e5a76[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jun 20 20:21:39 2015 -0700

    Revert "Replaced anonymous generalized union with named union"
    
    This reverts commit 5fcb04987b83ff3ab960d5ed170adb5257cff69a.

[33mcommit f026a3c0bb3bbf28232fdd54c5622332f681c69e[m
Author: Benedikt Bitterli <mail@noobody.org>
Date:   Sat Jun 20 23:27:42 2015 +0200

    Use Bison/Flex on Windows if available, fall back otherwise

[33mcommit 2fd70280dad5ddf44ef8837193b66c30fcfd4578[m
Author: Benedikt Bitterli <mail@noobody.org>
Date:   Sat Jun 20 23:26:09 2015 +0200

    Set c++0x compiler switch for both Clang and gcc

[33mcommit 5fcb04987b83ff3ab960d5ed170adb5257cff69a[m
Author: Benedikt Bitterli <mail@noobody.org>
Date:   Fri Jun 19 13:39:58 2015 +0200

    Replaced anonymous generalized union with named union

[33mcommit 6c204da4cc1b5d2c59addc3d1ae040ab2ca5e2ea[m
Author: Benedikt Bitterli <mail@noobody.org>
Date:   Fri Jun 19 13:38:46 2015 +0200

    Removed broken __MINGW64__ compiler switch

[33mcommit 908c55bd0e1d672fa3f33c0451ea564e3837ceb4[m
Author: Benedikt Bitterli <mail@noobody.org>
Date:   Fri Jun 19 13:38:11 2015 +0200

    Replaced non-standard uint with proper sized typedefs

[33mcommit 6c4f76a8503b93e0cb7aa22346a369a018876f4a[m
Author: Benedikt Bitterli <mail@noobody.org>
Date:   Fri Jun 19 13:09:46 2015 +0200

    Moved MSVC specific fix into appropriate ifdef block

[33mcommit 33554abb9c109d8d4513286d0614b1ff3fb8eaa2[m
Author: Benedikt Bitterli <mail@noobody.org>
Date:   Fri Jun 19 13:09:28 2015 +0200

    Minor isnan -> std::isnan fixes

[33mcommit 59a95ba835a0e9e13d5bb393707ec6d5e9b3024f[m
Author: Benedikt Bitterli <mail@noobody.org>
Date:   Fri Jun 19 13:08:58 2015 +0200

    Moved MSVC specific pragmas into PBRT_IS_MSVC block

[33mcommit 3fdd970f989bdc3c7418b316e8dfdd39d61eba55[m
Author: Benedikt Bitterli <mail@noobody.org>
Date:   Fri Jun 19 13:08:29 2015 +0200

    Added PBRT_IS_MSVC/PBRT_IS_MINGW defines

[33mcommit 9be434beda55663d2bb88ce45fd96ed297b39cba[m
Author: Benedikt Bitterli <mail@noobody.org>
Date:   Fri Jun 19 13:08:02 2015 +0200

    Renamed shutdown -> pbrtShutdown to avoid clash with winsock shutdown function

[33mcommit 6696fb928faf1825173e3246318a48023c7a8884[m
Author: Benedikt Bitterli <mail@noobody.org>
Date:   Fri Jun 19 13:07:35 2015 +0200

    Added missing <windows.h> include in parallel.cpp

[33mcommit 7ad5bdd5fc79473a06b9e267c414ec690f633db1[m
Author: Benedikt Bitterli <mail@noobody.org>
Date:   Fri Jun 19 13:07:21 2015 +0200

    Added missing std:: namespace prefix

[33mcommit a8e822ba0cb3502a23b4c69083ca988dcd880fb9[m
Author: Benedikt Bitterli <mail@noobody.org>
Date:   Fri Jun 19 13:07:08 2015 +0200

    Added missing pbrt.h include (for PBRT_IS_WINDOWS macro)

[33mcommit 6eae544e3be2aa7658370080359967dba505774f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jun 20 10:33:17 2015 -0700

    Integrate latest changes from book source.
    
    (WhittedIntegrator and SamplerIntegrator cleanups, refactoring.)
    
    No functional difference.

[33mcommit a731649f7c56622a0aa5e307fd7fd5207b424c1c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jun 20 10:32:28 2015 -0700

    Add bit operations unit test.

[33mcommit c74f4d5e6410399fd11f7965dd56b5cefb3a6979[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jun 20 10:32:10 2015 -0700

    Various MSVC build fixes. (Not yet working).

[33mcommit a3c720b0f529348166be98692e1b6716aed2c4db[m
Merge: 4d11b04 8c3b729
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jun 20 09:43:09 2015 -0700

    Merge branch 'AaronMK-VS2013_Introduction'

[33mcommit 8c3b729c70f82b277d654055cd852f98fcef19ec[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jun 20 09:42:37 2015 -0700

    Remove MSVC2013 build files

[33mcommit 54067586d08562be148e90b934ee1a420eba2282[m
Merge: 4d11b04 b3337c9
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jun 20 09:40:43 2015 -0700

    Merge branch 'VS2013_Introduction' of https://github.com/AaronMK/pbrt-v3 into AaronMK-VS2013_Introduction

[33mcommit 4d11b043c7d3134246ada1529661934ddc4e8b52[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jun 20 09:23:56 2015 -0700

    Small cmake cleanups

[33mcommit 41e03d19c425d38aa9e96c42755c17cd30fb982f[m
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jun 20 09:02:38 2015 -0700

    cmake build updates.
    
    Remove Makefile and scons build files.
    Remove OpenEXR and libtiff dependencies.
    Update README.md for how to build the system.

[33mcommit a8973f7d1f36e54361c3456385554e24b2e7d95d[m
Merge: 8e23330 e3f2399
Author: Matt Pharr <matt@pharr.org>
Date:   Sat Jun 20 07:39:37 2015 -0700

    Merge pull request #4 from nyue/master
    
    Added CMake configuration file

[33mcommit b3337c9c80f6fb529d4a67b36ac4d252c08abb22[m
Author: Aaron Karp <aaron.m.karp@gmail.com>
Date:   Sat Jun 20 00:24:56 2015 -0400

    - Adding projects for tools.

[33mcommit e3f2399961aa8aae0467cdb85159242258b1f0a3[m
Author: Nicholas Yue <yue.nicholas@gmail.com>
Date:   Fri Jun 19 08:14:14 2015 -0700

    Add finding of thread package
    Add linkage of thread to pbrt_test, this is required on Linux

[33mcommit 4701dff6c05b57a39318b32aa711f9575c54a42b[m
Author: Aaron Karp <aaron.m.karp@gmail.com>
Date:   Fri Jun 19 03:02:31 2015 -0400

    --------------------------
    
    Made stdafx.h a no-op.
    
    pbrt.h put up the include guard for the body of the file, then included stdafx.h, which then included pbrt.h again, but by that point PBRT_CORE_PBRT_H is already defined, so the body of pbrt.h was locked out, causing problems with headers in stdafx.h which depend on pbrt.h.
    
    --------------------------
    
    Added work arounds for a couple of built in GCC functions for MSVC,  One of these was already in the comments.  ** Need to check MSVC implementation of __builtin_clz().  **
    
    --------------------------
    
    VS2013 does not support "constexpr" keyword, so some constants use define instead on MSVC as a workaround.
    
    --------------------------

[33mcommit 382dccf21b2810c94c6198599c32cdecdfc3fcc8[m
Author: Nicholas Yue <yue.nicholas@gmail.com>
Date:   Thu Jun 18 21:53:29 2015 -0700

    Add unit test

[33mcommit 925a75b977a66b1f601f6766ab04168627726fc3[m
Author: Nicholas Yue <yue.nicholas@gmail.com>
Date:   Thu Jun 18 21:40:51 2015 -0700

    Build the supporting tools
    Added cmake macros for finding OpenEXE headers/libraries

[33mcommit cd834d0f49a9da7b5fe4813ae8b7d40277c5bd8d[m
Author: Nicholas Yue <yue.nicholas@gmail.com>
Date:   Thu Jun 18 20:15:17 2015 -0700

    Change to append CXX_FLAGS rather than just set them

[33mcommit d08329c1cd281c0d27777950e447880c1cf2858e[m
Author: Nicholas Yue <yue.nicholas@gmail.com>
Date:   Thu Jun 18 20:10:47 2015 -0700

    Add -std=c++11 for clang when building on OS X

[33mcommit 8e23330a3db5e7abe0152f0844824728d8f03d13[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jun 18 19:04:05 2015 -0700

    BDPT: add support for infinite area lights.
    
    A few other general cleanups as well.

[33mcommit 643337a55051aa21835dfa4453087a7e2cfd5e10[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jun 18 19:03:42 2015 -0700

    Fix rounding error correction in Bounds3::IntersectP().
    
    (Via Thiago Ize.)

[33mcommit eb40a83bba6a8dbd4e17130e4eaf71813bce57f9[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jun 18 19:03:13 2015 -0700

    Update precompiled lexer.

[33mcommit b7c670c21cfcef9db59a9077db827278f0eaedca[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jun 18 19:02:43 2015 -0700

    Fix unique_ptr declaration so that delete[] is called for allocation with new[].

[33mcommit 73a1ced362b5ff216edfe9c4aefac8697f42ebde[m
Merge: 5fa04e9 fc3e949
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jun 18 19:02:12 2015 -0700

    Merge branch 'master' of github.com:mmp/pbrt-v3

[33mcommit 5fa04e956f1440c4a28cfe14fe378772adb58675[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jun 18 19:01:51 2015 -0700

    Re-enable EXR tests.

[33mcommit 49a55f832cffa01c0a78725bdab867a111626b4a[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jun 18 19:01:43 2015 -0700

    Update to latest tinyexr version.

[33mcommit 818059199dc627399117c0fc89cc7ab71ae39f79[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jun 18 19:01:05 2015 -0700

    Replace IsNaN() with direct std::isnan() calls.

[33mcommit 464448ad3c4970bcf7da9b67de0de9d108ffb11c[m
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jun 18 18:59:50 2015 -0700

    Remove tools/exrcat

[33mcommit ddcc3638877d9515a1d7bf71c1cf49ebf8246d84[m
Author: Nicholas Yue <yue.nicholas@gmail.com>
Date:   Thu Jun 18 08:24:00 2015 -0700

    Add installation targets for CMake build configuration

[33mcommit fc3e9491e76c5aa6186297c05fbe9fe28d320cae[m
Merge: c826c34 c485c71
Author: Matt Pharr <matt@pharr.org>
Date:   Thu Jun 18 07:07:53 2015 -0700

    Merge pull request #3 from sriravic/master
    
    Added pthread library for linker error

[33mcommit c485c7132b98737155e2b3546455ac315608581f[m
Author: sriravic <srinath.pop@gmail.com>
Date:   Thu Jun 18 17:25:34 2015 +0530

    Added pthread library for linker error

[33mcommit 56099c7d685cb3fe7c5b55309f418456264fecb2[m
Author: Aaron Karp <aaron.m.karp@gmail.com>
Date:   Thu Jun 18 04:11:53 2015 -0400

    Initial upload of Visual Studio 2013 solution and project files.
    
    This contains on project that builds the pbrt code base as a static library (although I am getting compile errors with the code itself), which will be used by the various executable projects.  It also has a shared project properties file that adds the include search paths to any project that inherits it.

[33mcommit 08dc1da0d5c4df514ad50f0867f3b19c483884c6[m
Author: Nicholas Yue <yue.nicholas@gmail.com>
Date:   Wed Jun 17 22:23:27 2015 -0700

    Initial working version of CMake configuration

[33mcommit fa54a7a7376b126b05584b7c6292852a17e55376[m
Author: Nicholas Yue <yue.nicholas@gmail.com>
Date:   Wed Jun 17 21:10:58 2015 -0700

    Add CMake configuration file at the top level directory following
    conventional practice.

[33mcommit 15b475e67ea057d116790fb0a77b95e268988626[m
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jun 16 17:52:19 2015 -0700

    Add .clang-format file

[33mcommit c826c3499ff67a8363dc53b57f3952aba5015291[m
Merge: 1eb66bf 1f4d929
Author: Matt Pharr <matt@pharr.org>
Date:   Tue Jun 16 09:03:35 2015 -0700

    Merge pull request #1 from KojiNakamaru/fix/curve_intersect
    
    fixed Curve::Intersect() about z component.

[33mcommit b2160cec1d648fae2c89c0123797e5abee14dddb[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jun 15 18:26:10 2015 -0700

    Remove tifftoexr tool

[33mcommit 1f4d929c0a66208ca918fe1abf0a04750f6a0550[m
Author: Koji Nakamaru <koji.nakamaru@gree.net>
Date:   Tue Jun 16 10:10:41 2015 +0900

    fixed Curve::Intersect() about z component.

[33mcommit cbd684297cbcabc4a95d3cd28fdfb1ea08cb17af[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jun 15 17:52:05 2015 -0400

    Remove ply2pbrt tool

[33mcommit 1eb66bfb27e4188c4bb4b358a43f51c7f90b4a89[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jun 15 14:14:52 2015 -0400

    Remove github-generated LICENSE

[33mcommit e8e0715ba2900b74d2a85a8ef65b5d64234ac9fe[m
Merge: 5c81f47 7dc06cf
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jun 15 14:14:35 2015 -0400

    Merge branch 'master' of github.com:mmp/pbrt-v3

[33mcommit 7dc06cf2e25c8b782617a216b8ea67000d034713[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jun 15 14:13:08 2015 -0400

    Initial commit

[33mcommit 5c81f476136d7ccb94feb300cb6aa34532746bca[m
Author: Matt Pharr <matt@pharr.org>
Date:   Mon Jun 15 08:47:49 2015 -0400

    Initial commit.
